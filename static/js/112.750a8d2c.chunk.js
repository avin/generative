(this.webpackJsonpgenerative=this.webpackJsonpgenerative||[]).push([[112,114],{147:function(m,c,n){"use strict";n.r(c),n.d(c,"default",function(){return d});var a=n(759),u=n.n(a),h=Math.pow;class d{constructor(r){for(const[t,e]of Object.entries(r))this[t]=e;this.color=u.a.pick(["#4b86b4","#adcbe3","#63ace5"]),this.size=this.baseOptions.fieldSize/100,this.speed=this.baseOptions.fieldSize/100*this.initSpeedFactor}update(){const{moveAngle:r,game:{enemies:t}}=this;this.bX=this.x,this.bY=this.y,this.speed+=-.1,this.speed<=0?(this.draw(!0),this.destroy()):(this.x+=Math.cos(r)*this.speed,this.y+=Math.sin(r)*this.speed),(this.x<-100||this.x>this.baseOptions.width+100||this.y<-100||this.y>this.baseOptions.height+100)&&this.destroy(),t.items.forEach(e=>{e.live&&Math.sqrt(h(this.x-e.x,2)+h(this.y-e.y,2))<e.size&&(e.explode(),this.destroy())})}draw(r=!1){const{baseOptions:{context:t,backgroundContext:e},x:s,y:o}=this;let i;r?i=e:i=t,i.lineWidth=this.size/10;const l=Math.min(this.size*Math.max(this.speed,1),this.size*5);i.beginPath(),i.moveTo(this.x,this.y),i.lineTo(this.x+Math.cos(this.moveAngle-Math.PI)*l,this.y+Math.sin(this.moveAngle-Math.PI)*l),i.stroke(),i.fillStyle=this.color,i.beginPath(),i.arc(s,o,this.size/2,0,Math.PI*2),i.fill(),i.stroke()}destroy(){this.game.bullets.remove(this)}}},149:function(m,c,n){"use strict";n.r(c),n.d(c,"default",function(){return f});var a=n(772),u=n(759),h=n.n(u),d=n(147);class f{constructor(t){for(const[e,s]of Object.entries(t))this[e]=s;this.deadTime=0,this.size=this.baseOptions.fieldSize/50,document.addEventListener("keydown",this.handleKeyPress.bind(this)),document.addEventListener("keyup",this.handleKeyUp.bind(this)),this.baseOptions.canvas.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.baseOptions.canvas.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.cursorX=0,this.cursorY=0,this.moveDirection={up:!1,right:!1,down:!1,left:!1},this.gunAngle=Math.PI}fire(){if(!this.game.running){this.game.ship.deadTime=this.game.time,this.game.running=!0,Object(a.a)(h.a.pick([100]),"sine",1,.5);return}if(this.dead)return;const{baseOptions:t,game:e}=this;Object(a.a)(h.a.pick([311.1,370,415.3]),"sawtooth",.1,.5),Object(a.a)(h.a.pick([155.6,185,207.7]),"sine",.2,.5);for(let s=0;s<8;s+=1){const o=new d.default({baseOptions:t,game:e,x:this.gunTipCoord[0],y:this.gunTipCoord[1],moveAngle:this.gunAngle+h.a.range(-Math.PI/32,Math.PI/32),initSpeedFactor:h.a.range(.8,1.2)});e.bullets.add(o)}}explode(){Object(a.a)(87.31,"triangle",.1);const{x:t,y:e,baseOptions:s,game:o}=this;this.dead=!0,this.deadTime=o.time;for(let i=-Math.PI;i<Math.PI;i+=Math.PI/50){const l=new d.default({baseOptions:s,game:o,x:t,y:e,moveAngle:i,initSpeedFactor:h.a.range(.8,1.2)});o.bullets.add(l)}}handleMouseDown(t){this.fire()}handleMouseMove(t){const{movementX:e,movementY:s}=t;this.cursorX+=e,this.cursorY+=s,this.gunAngle=Math.atan2(this.cursorY,this.cursorX),this.cursorX=200*Math.cos(this.gunAngle),this.cursorY=200*Math.sin(this.gunAngle)}handleKeyPress(t){switch(t.code){case"ArrowUp":case"KeyW":{this.moveDirection.up=!0;break}case"ArrowRight":case"KeyD":{this.moveDirection.right=!0;break}case"ArrowDown":case"KeyS":{this.moveDirection.down=!0;break}case"ArrowLeft":case"KeyA":{this.moveDirection.left=!0;break}default:}}handleKeyUp(t){switch(t.code){case"ArrowUp":case"KeyW":{this.moveDirection.up=!1;break}case"ArrowRight":case"KeyD":{this.moveDirection.right=!1;break}case"ArrowDown":case"KeyS":{this.moveDirection.down=!1;break}case"ArrowLeft":case"KeyA":{this.moveDirection.left=!1;break}default:}}update(){if(this.dead){this.game.time-this.deadTime>1&&(this.dead=!1);return}const t=this.baseOptions.fieldSize/300;this.moveDirection.up&&(this.y+=-t),this.moveDirection.right&&(this.x+=t),this.moveDirection.down&&(this.y+=t),this.moveDirection.left&&(this.x-=t),this.x=Math.max(Math.min(this.baseOptions.width,this.x),0),this.y=Math.max(Math.min(this.baseOptions.height,this.y),0)}draw(){const{baseOptions:{context:t},x:e,y:s,gunAngle:o}=this;if(this.dead)return;t.fillStyle="#96ceb4",t.lineWidth=this.size/10,t.beginPath(),t.arc(e,s,this.size/2,0,Math.PI*2),t.fill(),t.stroke(),t.beginPath();const i=Math.cos(o)*this.size/2,l=Math.sin(o)*this.size/2,g=Math.cos(o)*this.size*1.5,v=Math.sin(o)*this.size*1.5;this.gunTipCoord=[e+g,s+v],t.moveTo(e+i,s+l),t.lineTo(e+g,s+v),t.stroke()}}},772:function(m,c,n){"use strict";n.d(c,"a",function(){return u});const a=new(window.AudioContext||window.webkitAudioContext);function u(h,d,f,r=1){const t=a.createOscillator(),e=a.createGain();t.connect(e),t.type=d,e.connect(a.destination),t.frequency.value=h,t.start(),e.gain.value=r,e.gain.exponentialRampToValueAtTime(1e-5,a.currentTime+f),setTimeout(()=>{t.stop(),t.disconnect()},(f+.5)*1e3)}}}]);
