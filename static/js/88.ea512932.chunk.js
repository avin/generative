(this.webpackJsonpgenerative=this.webpackJsonpgenerative||[]).push([[88,112,113,114],{147:function(D,m,i){"use strict";i.r(m),i.d(m,"default",function(){return g});var f=i(759),c=i.n(f),h=Math.pow;class g{constructor(M){for(const[t,e]of Object.entries(M))this[t]=e;this.color=c.a.pick(["#4b86b4","#adcbe3","#63ace5"]),this.size=this.baseOptions.fieldSize/100,this.speed=this.baseOptions.fieldSize/100*this.initSpeedFactor}update(){const{moveAngle:M,game:{enemies:t}}=this;this.bX=this.x,this.bY=this.y,this.speed+=-.1,this.speed<=0?(this.draw(!0),this.destroy()):(this.x+=Math.cos(M)*this.speed,this.y+=Math.sin(M)*this.speed),(this.x<-100||this.x>this.baseOptions.width+100||this.y<-100||this.y>this.baseOptions.height+100)&&this.destroy(),t.items.forEach(e=>{e.live&&Math.sqrt(h(this.x-e.x,2)+h(this.y-e.y,2))<e.size&&(e.explode(),this.destroy())})}draw(M=!1){const{baseOptions:{context:t,backgroundContext:e},x:s,y:a}=this;let n;M?n=e:n=t,n.lineWidth=this.size/10;const o=Math.min(this.size*Math.max(this.speed,1),this.size*5);n.beginPath(),n.moveTo(this.x,this.y),n.lineTo(this.x+Math.cos(this.moveAngle-Math.PI)*o,this.y+Math.sin(this.moveAngle-Math.PI)*o),n.stroke(),n.fillStyle=this.color,n.beginPath(),n.arc(s,a,this.size/2,0,Math.PI*2),n.fill(),n.stroke()}destroy(){this.game.bullets.remove(this)}}},148:function(D,m,i){"use strict";i.r(m),i.d(m,"default",function(){return b});var f=i(759),c=i.n(f),h=i(772),g=Math.pow;class b{constructor(t){for(const[e,s]of Object.entries(t))this[e]=s;this.live=!0,this.sizeFactor=c.a.range(20,30),this.size=this.baseOptions.fieldSize*(1/this.sizeFactor),this.particleSize=this.baseOptions.fieldSize/100,this.speed=this.baseOptions.fieldSize/(this.sizeFactor*10),this.moveAngle=Math.PI/2}update(){const{game:{ship:t}}=this;if(this.live)this.moveAngle=Math.atan2(t.y-this.y,t.x-this.x),this.x+=Math.cos(this.moveAngle)*this.speed,this.y+=Math.sin(this.moveAngle)*this.speed,Math.sqrt(g(this.x-t.x,2)+g(this.y-t.y,2))<this.size/2+t.size/2&&(t.explode(),this.destroy());else{let e=0;this.particles.forEach(s=>(s.x+=Math.cos(s.a)*s.speed,s.y+=Math.sin(s.a)*s.speed,s.speed=Math.max(s.speed-(1-1/s.speed),1),e=Math.max(e,s.speed),s)),e<=1&&(this.draw(!0),this.destroy())}}draw(t=!1){const{baseOptions:{context:e,backgroundContext:s},x:a,y:n}=this;let o;t?o=s:o=e,this.live?(o.fillStyle="#ff6f69",o.lineWidth=this.size/30,o.beginPath(),o.arc(a,n,this.size/2,0,Math.PI*2),o.fill(),o.stroke(),s.fillStyle="hsla(0,0%,98%,0.1)",s.beginPath(),s.arc(a,n,this.size/2,0,Math.PI*2),s.fill()):this.particles.forEach(({x:r,y:d,size:E,c:P})=>{o.fillStyle=P,o.beginPath(),o.arc(r,d,E/2,0,Math.PI*2),o.fill()})}explode(){Object(h.a)(c.a.pick([349.2+100,392+100,440+100]),"sine",.12),this.live=!1,this.particles=[];for(let t=0;t<this.sizeFactor*2;t+=1){const e={x:this.x+c.a.range(-this.size,this.size),y:this.y+c.a.range(-this.size,this.size),speed:c.a.range(5,10),size:this.particleSize*c.a.range(.5,1.5),c:`hsl(0, 100%,${c.a.range(40,60)}%)`};e.a=Math.atan2(e.y-this.y,e.x-this.x),this.particles.push(e)}}destroy(){this.game.enemies.remove(this)}}},149:function(D,m,i){"use strict";i.r(m),i.d(m,"default",function(){return b});var f=i(772),c=i(759),h=i.n(c),g=i(147);class b{constructor(t){for(const[e,s]of Object.entries(t))this[e]=s;this.deadTime=0,this.size=this.baseOptions.fieldSize/50,document.addEventListener("keydown",this.handleKeyPress.bind(this)),document.addEventListener("keyup",this.handleKeyUp.bind(this)),this.baseOptions.canvas.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.baseOptions.canvas.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.cursorX=0,this.cursorY=0,this.moveDirection={up:!1,right:!1,down:!1,left:!1},this.gunAngle=Math.PI}fire(){if(!this.game.running){this.game.ship.deadTime=this.game.time,this.game.running=!0,Object(f.a)(h.a.pick([100]),"sine",1,.5);return}if(this.dead)return;const{baseOptions:t,game:e}=this;Object(f.a)(h.a.pick([311.1,370,415.3]),"sawtooth",.1,.5),Object(f.a)(h.a.pick([155.6,185,207.7]),"sine",.2,.5);for(let s=0;s<8;s+=1){const a=new g.default({baseOptions:t,game:e,x:this.gunTipCoord[0],y:this.gunTipCoord[1],moveAngle:this.gunAngle+h.a.range(-Math.PI/32,Math.PI/32),initSpeedFactor:h.a.range(.8,1.2)});e.bullets.add(a)}}explode(){Object(f.a)(87.31,"triangle",.1);const{x:t,y:e,baseOptions:s,game:a}=this;this.dead=!0,this.deadTime=a.time;for(let n=-Math.PI;n<Math.PI;n+=Math.PI/50){const o=new g.default({baseOptions:s,game:a,x:t,y:e,moveAngle:n,initSpeedFactor:h.a.range(.8,1.2)});a.bullets.add(o)}}handleMouseDown(t){this.fire()}handleMouseMove(t){const{movementX:e,movementY:s}=t;this.cursorX+=e,this.cursorY+=s,this.gunAngle=Math.atan2(this.cursorY,this.cursorX),this.cursorX=200*Math.cos(this.gunAngle),this.cursorY=200*Math.sin(this.gunAngle)}handleKeyPress(t){switch(t.code){case"ArrowUp":case"KeyW":{this.moveDirection.up=!0;break}case"ArrowRight":case"KeyD":{this.moveDirection.right=!0;break}case"ArrowDown":case"KeyS":{this.moveDirection.down=!0;break}case"ArrowLeft":case"KeyA":{this.moveDirection.left=!0;break}default:}}handleKeyUp(t){switch(t.code){case"ArrowUp":case"KeyW":{this.moveDirection.up=!1;break}case"ArrowRight":case"KeyD":{this.moveDirection.right=!1;break}case"ArrowDown":case"KeyS":{this.moveDirection.down=!1;break}case"ArrowLeft":case"KeyA":{this.moveDirection.left=!1;break}default:}}update(){if(this.dead){this.game.time-this.deadTime>1&&(this.dead=!1);return}const t=this.baseOptions.fieldSize/300;this.moveDirection.up&&(this.y+=-t),this.moveDirection.right&&(this.x+=t),this.moveDirection.down&&(this.y+=t),this.moveDirection.left&&(this.x-=t),this.x=Math.max(Math.min(this.baseOptions.width,this.x),0),this.y=Math.max(Math.min(this.baseOptions.height,this.y),0)}draw(){const{baseOptions:{context:t},x:e,y:s,gunAngle:a}=this;if(this.dead)return;t.fillStyle="#96ceb4",t.lineWidth=this.size/10,t.beginPath(),t.arc(e,s,this.size/2,0,Math.PI*2),t.fill(),t.stroke(),t.beginPath();const n=Math.cos(a)*this.size/2,o=Math.sin(a)*this.size/2,r=Math.cos(a)*this.size*1.5,d=Math.sin(a)*this.size*1.5;this.gunTipCoord=[e+r,s+d],t.moveTo(e+n,s+o),t.lineTo(e+r,s+d),t.stroke()}}},50:function(D,m,i){"use strict";i.r(m);var f=i(759),c=i.n(f),h=i(783),g=i(149),b=i(148),M=(a,n,o)=>new Promise((r,d)=>{var E=u=>{try{x(o.next(u))}catch(A){d(A)}},P=u=>{try{x(o.throw(u))}catch(A){d(A)}},x=u=>u.done?r(u.value):Promise.resolve(u.value).then(E,P);x((o=o.apply(a,n)).next())});const t=a=>{a.addEventListener("click",()=>{a.requestPointerLock=a.requestPointerLock||a.mozRequestPointerLock||a.webkitRequestPointerLock,a.requestPointerLock()})},e={dimensions:[1201,1201],animate:!0},s=a=>M(void 0,[a],function*({canvas:n,context:o,width:r,height:d}){t(n);const E=document.createElement("canvas");E.width=r,E.height=d;const P=E.getContext("2d");P.fillStyle="hsl(0, 0%, 98%)",P.fillRect(0,0,r,d);const x=document.createElement("canvas");x.width=r,x.height=d;const u=x.getContext("2d");u.lineWidth=.05,u.strokeStyle="hsla(0, 0%, 50%)";for(let l=.5;l<d;l+=50)u.beginPath(),u.moveTo(0,l),u.lineTo(r,l),u.stroke();for(let l=.5;l<r;l+=50)u.beginPath(),u.moveTo(l,0),u.lineTo(l,d),u.stroke();const A=Math.min(r,d),v={running:!1},z={context:o,canvas:n,fieldSize:A,width:r,height:d,backgroundContext:P,backGroundCanvas:E};v.bullets=new h.a,v.enemies=new h.a,v.ship=new g.default({baseOptions:z,game:v,x:r/2,y:d/2});const _=()=>{const l=c.a.pick(["top","left","bottom","right"]);let O=0,y=0;const p=100;switch(l){case"top":{y=-p,O=c.a.range(0-p,r+p);break}case"right":{O=r+p,y=c.a.range(0-p,r+p);break}case"bottom":{y=d+p,O=c.a.range(0-p,r+p);break}case"left":{O=-p,y=c.a.range(0-p,r+p);break}default:}v.enemies.add(new b.default({baseOptions:z,game:v,x:O,y}))};return({context:l,time:O})=>{v.time=O,P.drawImage(x,0,0),P.fillStyle="hsla(0, 0%, 98%, 0.01)",P.fillRect(0,0,r,d),l.drawImage(E,0,0),v.running?(v.enemies.size<Math.min(Math.floor((O-v.ship.deadTime)/3)+1,15)&&_(),v.enemies.items.forEach(y=>{y.update(),y.draw()}),v.bullets.items.forEach(y=>{y.update(),y.draw()}),v.ship.update(),v.ship.draw()):(l.save(),l.translate(r/2,d/2),l.rotate(Math.cos(O*5)/5),l.font="bold 90px Arial",l.textAlign="center",l.fillStyle="hsl(0, 0%, 20%)",l.fillText("Click to start",0,0),l.restore())}});m.default={sketch:s,settings:e}},772:function(D,m,i){"use strict";i.d(m,"a",function(){return c});const f=new(window.AudioContext||window.webkitAudioContext);function c(h,g,b,M=1){const t=f.createOscillator(),e=f.createGain();t.connect(e),t.type=g,e.connect(f.destination),t.frequency.value=h,t.start(),e.gain.value=M,e.gain.exponentialRampToValueAtTime(1e-5,f.currentTime+b),setTimeout(()=>{t.stop(),t.disconnect()},(b+.5)*1e3)}},783:function(D,m,i){"use strict";class f{constructor(){this.items=[]}add(h){this.items.push(h)}append(...h){this.add(...h)}remove(h){this.items=this.items.filter(g=>g!==h)}delete(...h){this.remove(...h)}clean(){this.items=[]}get size(){return this.items.length}[Symbol.iterator](){return this.items.values()}}m.a=f}}]);
