(this.webpackJsonpgenerative=this.webpackJsonpgenerative||[]).push([[113],{148:function(p,o,n){"use strict";n.r(o),n.d(o,"default",function(){return c});var h=n(759),a=n.n(h),r=n(772),l=Math.pow;class c{constructor(t){for(const[i,e]of Object.entries(t))this[i]=e;this.live=!0,this.sizeFactor=a.a.range(20,30),this.size=this.baseOptions.fieldSize*(1/this.sizeFactor),this.particleSize=this.baseOptions.fieldSize/100,this.speed=this.baseOptions.fieldSize/(this.sizeFactor*10),this.moveAngle=Math.PI/2}update(){const{game:{ship:t}}=this;if(this.live)this.moveAngle=Math.atan2(t.y-this.y,t.x-this.x),this.x+=Math.cos(this.moveAngle)*this.speed,this.y+=Math.sin(this.moveAngle)*this.speed,Math.sqrt(l(this.x-t.x,2)+l(this.y-t.y,2))<this.size/2+t.size/2&&(t.explode(),this.destroy());else{let i=0;this.particles.forEach(e=>(e.x+=Math.cos(e.a)*e.speed,e.y+=Math.sin(e.a)*e.speed,e.speed=Math.max(e.speed-(1-1/e.speed),1),i=Math.max(i,e.speed),e)),i<=1&&(this.draw(!0),this.destroy())}}draw(t=!1){const{baseOptions:{context:i,backgroundContext:e},x:f,y:u}=this;let s;t?s=e:s=i,this.live?(s.fillStyle="#ff6f69",s.lineWidth=this.size/30,s.beginPath(),s.arc(f,u,this.size/2,0,Math.PI*2),s.fill(),s.stroke(),e.fillStyle="hsla(0,0%,98%,0.1)",e.beginPath(),e.arc(f,u,this.size/2,0,Math.PI*2),e.fill()):this.particles.forEach(({x:y,y:x,size:g,c:m})=>{s.fillStyle=m,s.beginPath(),s.arc(y,x,g/2,0,Math.PI*2),s.fill()})}explode(){Object(r.a)(a.a.pick([349.2+100,392+100,440+100]),"sine",.12),this.live=!1,this.particles=[];for(let t=0;t<this.sizeFactor*2;t+=1){const i={x:this.x+a.a.range(-this.size,this.size),y:this.y+a.a.range(-this.size,this.size),speed:a.a.range(5,10),size:this.particleSize*a.a.range(.5,1.5),c:`hsl(0, 100%,${a.a.range(40,60)}%)`};i.a=Math.atan2(i.y-this.y,i.x-this.x),this.particles.push(i)}}destroy(){this.game.enemies.remove(this)}}},772:function(p,o,n){"use strict";n.d(o,"a",function(){return a});const h=new(window.AudioContext||window.webkitAudioContext);function a(r,l,c,d=1){const t=h.createOscillator(),i=h.createGain();t.connect(i),t.type=l,i.connect(h.destination),t.frequency.value=r,t.start(),i.gain.value=d,i.gain.exponentialRampToValueAtTime(1e-5,h.currentTime+c),setTimeout(()=>{t.stop(),t.disconnect()},(c+.5)*1e3)}}}]);
