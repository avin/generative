!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=68)}([function(t,e,n){var r=n(5)(Object,"create");t.exports=r},function(t,e,n){var r=n(12);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(59);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(67);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(29),i=n(37);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(7).Symbol;t.exports=r},function(t,e,n){var r=n(31),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(11),i=n(39);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e,n){var r=n(6),i=n(32),o=n(33),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e,n){var r=n(9),i=n(38),o=n(40),a=n(63);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e,n){var r=n(10);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){var r=n(19),i=n(20),o=n(21);t.exports=function(t,e){return r(t)||i(t,e)||o()}},function(t,e,n){(function(e){var n;n=function(){var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var o=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,o){for(var a,s,u=i(e),c=1;c<arguments.length;c++){for(var p in a=Object(arguments[c]))n.call(a,p)&&(u[p]=a[p]);if(t){s=t(a);for(var f=0;f<s.length;f++)r.call(a,s[f])&&(u[s[f]]=a[s[f]])}}return u},a="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};function s(t,e){return t(e={exports:{}},e.exports),e.exports}var u=a.performance&&a.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date},c=function(t){return!!t&&("object"===typeof t||"function"===typeof t)&&"function"===typeof t.then},p=function(t){return!(!t||"object"!==typeof t)&&("object"===typeof window&&"object"===typeof window.Node?t instanceof window.Node:"number"===typeof t.nodeType&&"string"===typeof t.nodeName)};function f(){return"undefined"!==typeof window&&window["canvas-sketch-cli"]}function l(){for(var t=arguments,e=0;e<arguments.length;e++)if(null!=t[e])return t[e]}function h(){return"undefined"!==typeof document}var d,v,m=s((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"===typeof Object.keys?Object.keys:n).shim=n})),y=(m.shim,s((function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i}))),g=(y.supported,y.unsupported,s((function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,u;if(r(t)||r(o))return!1;if(t.prototype!==o.prototype)return!1;if(y(t))return!!y(o)&&(t=e.call(t),o=e.call(o),n(t,o,a));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var c=m(t),p=m(o)}catch(f){return!1}if(c.length!=p.length)return!1;for(c.sort(),p.sort(),s=c.length-1;s>=0;s--)if(c[s]!=p[s])return!1;for(s=c.length-1;s>=0;s--)if(u=c[s],!n(t[u],o[u],a))return!1;return typeof t===typeof o}(t,o,a))};function r(t){return null===t||void 0===t}function i(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&"function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0])}}))),w=s((function(t,e){!function(e){var n=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,s=/[^-+\dA-Z]/g;return function(u,c,p,f){if(1!==arguments.length||"string"!==a(u)||/\d/.test(u)||(c=u,u=void 0),(u=u||new Date)instanceof Date||(u=new Date(u)),isNaN(u))throw TypeError("Invalid date");var l=(c=String(n.masks[c]||c||n.masks.default)).slice(0,4);"UTC:"!==l&&"GMT:"!==l||(c=c.slice(4),p=!0,"GMT:"===l&&(f=!0));var h=p?"getUTC":"get",d=u[h+"Date"](),v=u[h+"Day"](),m=u[h+"Month"](),y=u[h+"FullYear"](),g=u[h+"Hours"](),w=u[h+"Minutes"](),x=u[h+"Seconds"](),b=u[h+"Milliseconds"](),_=p?0:u.getTimezoneOffset(),M=i(u),T=o(u),j={d:d,dd:r(d),ddd:n.i18n.dayNames[v],dddd:n.i18n.dayNames[v+7],m:m+1,mm:r(m+1),mmm:n.i18n.monthNames[m],mmmm:n.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:g%12||12,hh:r(g%12||12),H:g,HH:r(g),M:w,MM:r(w),s:x,ss:r(x),l:r(b,3),L:r(Math.round(b/10)),t:g<12?n.i18n.timeNames[0]:n.i18n.timeNames[1],tt:g<12?n.i18n.timeNames[2]:n.i18n.timeNames[3],T:g<12?n.i18n.timeNames[4]:n.i18n.timeNames[5],TT:g<12?n.i18n.timeNames[6]:n.i18n.timeNames[7],Z:f?"GMT":p?"UTC":(String(u).match(e)||[""]).pop().replace(s,""),o:(_>0?"-":"+")+r(100*Math.floor(Math.abs(_)/60)+Math.abs(_)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10],W:M,N:T};return c.replace(t,(function(t){return t in j?j[t]:t.slice(1,t.length-1)}))}}();function r(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}function i(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=e.getTimezoneOffset()-n.getTimezoneOffset();e.setHours(e.getHours()-r);var i=(e-n)/6048e5;return 1+Math.floor(i)}function o(t){var e=t.getDay();return 0===e&&(e=7),e}function a(t){return null===t?"null":void 0===t?"undefined":"object"!==typeof t?typeof t:Array.isArray(t)?"array":{}.toString.call(t).slice(8,-1).toLowerCase()}n.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},n.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},t.exports=n}()})),x="",b=function(t,e){if("string"!==typeof t)throw new TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var n=t.length*e;if(d!==t||"undefined"===typeof d)d=t,x="";else if(x.length>=n)return x.substr(0,n);for(;n>x.length&&e>1;)1&e&&(x+=t),e>>=1,t+=t;return x=(x+=t).substr(0,n)},_=function(){},M={extension:"",prefix:"",suffix:""},T=["image/png","image/jpeg","image/webp"];function j(t,e){return void 0===e&&(e={}),new Promise((function(n,r){e=o({},M,e);var i=E(Object.assign({},e,{extension:"",frame:void 0})),a=t?"streamStart":"streamEnd",s=f();return s&&s.output&&"function"===typeof s[a]?s[a](o({},e,{filename:i})).then((function(t){return n(t)})):n({filename:i,client:!1})}))}function k(t,e){return void 0===e&&(e={}),function(t){return new Promise((function(e){var n=t.indexOf(",");if(-1!==n){for(var r=t.slice(n+1),i=window.atob(r),o=t.slice(0,n),a=/data:([^;]+)/.exec(o),s=(a?a[1]:"")||void 0,u=new ArrayBuffer(i.length),c=new Uint8Array(u),p=0;p<i.length;p++)c[p]=i.charCodeAt(p);e(new window.Blob([u],{type:s}))}else e(new window.Blob)}))}(t).then((function(t){return S(t,e)}))}function S(t,e){return void 0===e&&(e={}),new Promise((function(n){var r=(e=o({},M,e)).filename,i=f();if(i&&"function"===typeof i.saveBlob&&i.output)return i.saveBlob(t,o({},e,{filename:r})).then((function(t){return n(t)}));v||((v=document.createElement("a")).style.visibility="hidden",v.target="_blank"),v.download=r,v.href=window.URL.createObjectURL(t),document.body.appendChild(v),v.onclick=function(){v.onclick=_,setTimeout((function(){window.URL.revokeObjectURL(t),v.parentElement&&v.parentElement.removeChild(v),v.removeAttribute("href"),n({filename:r,client:!1})}))},v.click()}))}function E(t){if(void 0===t&&(t={}),"function"===typeof(t=o({},t)).file)return t.file(t);if(t.file)return t.file;var e,n,r,i,a=null,s="";"string"===typeof t.extension&&(s=t.extension),"number"===typeof t.frame&&(e="number"===typeof t.totalFrames?t.totalFrames:Math.max(1e4,t.frame),n=String(t.frame),r=String(e).length,i="0",n=n.toString(),a="undefined"===typeof r?n:(i=0===i?"0":i?i.toString():" ",b(i,r-n.length)+n));var u=isFinite(t.totalLayers)&&isFinite(t.layer)&&t.totalLayers>1?""+t.layer:"";if(null!=a)return[u,a].filter(Boolean).join("-")+s;var c=t.timeStamp;return[t.prefix,t.name||c,u,t.hash,t.suffix].filter(Boolean).join("-")+s}var P={dimension:"dimensions",animated:"animate",animating:"animate",unit:"units",P5:"p5",pixellated:"pixelated",looping:"loop",pixelPerInch:"pixels"},O=["dimensions","units","pixelsPerInch","orientation","scaleToFit","scaleToView","bleed","pixelRatio","exportPixelRatio","maxPixelRatio","scaleContext","resizeCanvas","styleCanvas","canvas","context","attributes","parent","file","name","prefix","suffix","animate","playing","loop","duration","totalFrames","fps","playbackRate","timeScale","frame","time","flush","pixelated","hotkeys","p5","id","scaleToFitPadding","data","params","encoding","encodingQuality"],F=function(t){Object.keys(t).forEach((function(t){if(t in P){var e=P[t];console.warn('[canvas-sketch] Could not recognize the setting "'+t+'", did you mean "'+e+'"?')}else O.includes(t)||console.warn('[canvas-sketch] Could not recognize the setting "'+t+'"')}))},R=[["postcard",101.6,152.4],["poster-small",280,430],["poster",460,610],["poster-large",610,910],["business-card",50.8,88.9],["2r",64,89],["3r",89,127],["4r",102,152],["5r",127,178],["6r",152,203],["8r",203,254],["10r",254,305],["11r",279,356],["12r",305,381],["a0",841,1189],["a1",594,841],["a2",420,594],["a3",297,420],["a4",210,297],["a5",148,210],["a6",105,148],["a7",74,105],["a8",52,74],["a9",37,52],["a10",26,37],["2a0",1189,1682],["4a0",1682,2378],["b0",1e3,1414],["b1",707,1e3],["b1+",720,1020],["b2",500,707],["b2+",520,720],["b3",353,500],["b4",250,353],["b5",176,250],["b6",125,176],["b7",88,125],["b8",62,88],["b9",44,62],["b10",31,44],["b11",22,32],["b12",16,22],["c0",917,1297],["c1",648,917],["c2",458,648],["c3",324,458],["c4",229,324],["c5",162,229],["c6",114,162],["c7",81,114],["c8",57,81],["c9",40,57],["c10",28,40],["c11",22,32],["c12",16,22],["half-letter",5.5,8.5,"in"],["letter",8.5,11,"in"],["legal",8.5,14,"in"],["junior-legal",5,8,"in"],["ledger",11,17,"in"],["tabloid",11,17,"in"],["ansi-a",8.5,11,"in"],["ansi-b",11,17,"in"],["ansi-c",17,22,"in"],["ansi-d",22,34,"in"],["ansi-e",34,44,"in"],["arch-a",9,12,"in"],["arch-b",12,18,"in"],["arch-c",18,24,"in"],["arch-d",24,36,"in"],["arch-e",36,48,"in"],["arch-e1",30,42,"in"],["arch-e2",26,38,"in"],["arch-e3",27,39,"in"]].reduce((function(t,e){var n={units:e[3]||"mm",dimensions:[e[1],e[2]]};return t[e[0]]=n,t[e[0].replace(/-/g," ")]=n,t}),{}),C=["mm","cm","m","pc","pt","in","ft","px"],A={m:{system:"metric",factor:1},cm:{system:"metric",factor:.01},mm:{system:"metric",factor:.001},pt:{system:"imperial",factor:1/72},pc:{system:"imperial",factor:1/6},in:{system:"imperial",factor:1},ft:{system:"imperial",factor:12}};const D={metric:{unit:"m",ratio:1/.0254},imperial:{unit:"in",ratio:.0254}};var z=function(t,e,n,r){if("number"!==typeof t||!isFinite(t))throw new Error("Value must be a finite number");if(!e||!n)throw new Error("Must specify from and to units");var i=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}((r=r||{}).pixelsPerInch,96),o=r.precision,a=!1!==r.roundPixel;if(e=e.toLowerCase(),n=n.toLowerCase(),-1===C.indexOf(e))throw new Error('Invalid from unit "'+e+'", must be one of: '+C.join(", "));if(-1===C.indexOf(n))throw new Error('Invalid from unit "'+n+'", must be one of: '+C.join(", "));if(e===n)return t;var s=1,u=1,c=!1;"px"===e&&(u=1/i,e="in"),"px"===n&&(c=!0,s=i,n="in");var p=A[e],f=A[n],l=t*p.factor*u;p.system!==f.system&&(l*=D[p.system].ratio);var h=l/f.factor*s;return c&&a?h=Math.round(h):"number"===typeof o&&isFinite(o)&&(h=function(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)}(h,o)),h},N=C;function H(t,e,n,r){return void 0===e&&(e="px"),void 0===n&&(n="px"),void 0===r&&(r=72),z(t,e,n,{pixelsPerInch:r,precision:4,roundPixel:!0})}function I(t,e){var n,r,i,o,a,s,u=h(),c=e.dimensions,p=function(t){return!!t.dimensions&&("string"===typeof t.dimensions||!!(Array.isArray(t.dimensions)&&t.dimensions.length>=2))}(e),f=t.exporting,d=!!p&&!1!==e.scaleToFit,v=!(!f&&p)||e.scaleToView;u||(d=v=!1);var m,y,g=e.units,w="number"===typeof e.pixelsPerInch&&isFinite(e.pixelsPerInch)?e.pixelsPerInch:72,x=l(e.bleed,0),b=u?window.devicePixelRatio:1,_=v?b:1;"number"===typeof e.pixelRatio&&isFinite(e.pixelRatio)?(m=e.pixelRatio,y=l(e.exportPixelRatio,m)):p?(m=_,y=l(e.exportPixelRatio,1)):(m=b,y=l(e.exportPixelRatio,m)),"number"===typeof e.maxPixelRatio&&isFinite(e.maxPixelRatio)&&(m=Math.min(e.maxPixelRatio,m)),f&&(m=y);var M,T,j=function(t,e){if(!h())return[300,150];var n=e.parent||window;if(n===window||n===document||n===document.body)return[window.innerWidth,window.innerHeight];var r=n.getBoundingClientRect();return[r.width,r.height]}(0,e),k=j[0],S=j[1];if(p){var E=function(t,e,n){if(void 0===e&&(e="px"),void 0===n&&(n=72),"string"===typeof t){var r=t.toLowerCase();if(!(r in R))throw new Error('The dimension preset "'+t+'" is not supported or could not be found; try using a4, a3, postcard, letter, etc.');var i=R[r];return i.dimensions.map((function(t){return H(t,i.units,e,n)}))}return t}(c,g,w),P=Math.max(E[0],E[1]),O=Math.min(E[0],E[1]);if(e.orientation){var F="landscape"===e.orientation;n=F?P:O,r=F?O:P}else n=E[0],r=E[1];M=n,T=r,n+=2*x,r+=2*x}else M=n=k,T=r=S;var C=n,A=r;if(p&&g&&(C=H(n,g,"px",w),A=H(r,g,"px",w)),i=Math.round(C),o=Math.round(A),d&&!f&&p){var D=n/r,z=k/S,N=l(e.scaleToFitPadding,40),I=Math.round(k-2*N),L=Math.round(S-2*N);(i>I||o>L)&&(z>D?(o=L,i=Math.round(o*D)):(i=I,o=Math.round(i/D)))}return{bleed:x,pixelRatio:m,width:n,height:r,dimensions:[n,r],units:g||"px",scaleX:(a=v?Math.round(m*i):Math.round(m*C))/n,scaleY:(s=v?Math.round(m*o):Math.round(m*A))/r,pixelsPerInch:w,viewportWidth:v?Math.round(i):Math.round(C),viewportHeight:v?Math.round(o):Math.round(A),canvasWidth:a,canvasHeight:s,trimWidth:M,trimHeight:T,styleWidth:i,styleHeight:o}}z.units=N;var L=function(t,e){if("string"!==typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"===typeof document&&!e.canvas)return null;var n=e.canvas||document.createElement("canvas");"number"===typeof e.width&&(n.width=e.width),"number"===typeof e.height&&(n.height=e.height);var r,i=e;try{var o=[t];0===t.indexOf("webgl")&&o.push("experimental-"+t);for(var a=0;a<o.length;a++)if(r=n.getContext(o[a],i))return r}catch(s){r=null}return r||null};function U(t){var e,n;void 0===t&&(t={});var r=!1;if(!1!==t.canvas){if(!(e=t.context)||"string"===typeof e){var i=t.canvas;i||(i=function(){if(!h())throw new Error("It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.");return document.createElement("canvas")}(),r=!0);var a=e||"2d";if("function"!==typeof i.getContext)throw new Error("The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?");if(!(e=L(a,o({},t.attributes,{canvas:i}))))throw new Error("Failed at canvas.getContext('"+a+"') - the browser may not support this context, or a different context may already be in use with this canvas.")}if(n=e.canvas,t.canvas&&n!==t.canvas)throw new Error("The { canvas } and { context } settings must point to the same underlying canvas element");t.pixelated&&(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.oImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,n.style["image-rendering"]="pixelated")}return{canvas:n,context:e,ownsCanvas:r}}var q=function(){var t=this;this._settings={},this._props={},this._sketch=void 0,this._raf=null,this._recordTimeout=null,this._lastRedrawResult=void 0,this._isP5Resizing=!1,this._keyboardShortcuts=function(t){void 0===t&&(t={});var e=function(e){if(t.enabled()){var n=f();83!==e.keyCode||e.altKey||!e.metaKey&&!e.ctrlKey?32===e.keyCode?t.togglePlay(e):n&&!e.altKey&&75===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),t.commit(e)):(e.preventDefault(),t.save(e))}};return{attach:function(){window.addEventListener("keydown",e)},detach:function(){window.removeEventListener("keydown",e)}}}({enabled:function(){return!1!==t.settings.hotkeys},save:function(e){e.shiftKey?t.props.recording?(t.endRecord(),t.run()):t.record():t.props.recording||t.exportFrame()},togglePlay:function(){t.props.playing?t.pause():t.play()},commit:function(e){t.exportFrame({commit:!0})}}),this._animateHandler=function(){return t.animate()},this._resizeHandler=function(){t.resize()&&t.render()}},W={sketch:{configurable:!0},settings:{configurable:!0},props:{configurable:!0}};W.sketch.get=function(){return this._sketch},W.settings.get=function(){return this._settings},W.props.get=function(){return this._props},q.prototype._computePlayhead=function(t,e){return"number"===typeof e&&isFinite(e)?t/e:0},q.prototype._computeFrame=function(t,e,n,r){return isFinite(n)&&n>1?Math.floor(t*(n-1)):Math.floor(r*e)},q.prototype._computeCurrentFrame=function(){return this._computeFrame(this.props.playhead,this.props.time,this.props.totalFrames,this.props.fps)},q.prototype._getSizeProps=function(){var t=this.props;return{width:t.width,height:t.height,pixelRatio:t.pixelRatio,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight,viewportWidth:t.viewportWidth,viewportHeight:t.viewportHeight}},q.prototype.run=function(){if(!this.sketch)throw new Error("should wait until sketch is loaded before trying to play()");return!1!==this.settings.playing&&this.play(),"function"===typeof this.sketch.dispose&&console.warn("In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()"),this.props.started||(this._signalBegin(),this.props.started=!0),this.tick(),this.render(),this},q.prototype._cancelTimeouts=function(){null!=this._raf&&"undefined"!==typeof window&&"function"===typeof window.cancelAnimationFrame&&(window.cancelAnimationFrame(this._raf),this._raf=null),null!=this._recordTimeout&&(clearTimeout(this._recordTimeout),this._recordTimeout=null)},q.prototype.play=function(){var t=this.settings.animate;"animation"in this.settings&&(t=!0,console.warn("[canvas-sketch] { animation } has been renamed to { animate }")),t&&(h()?this.props.playing||(this.props.started||(this._signalBegin(),this.props.started=!0),this.props.playing=!0,this._cancelTimeouts(),this._lastTime=u(),this._raf=window.requestAnimationFrame(this._animateHandler)):console.error("[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported"))},q.prototype.pause=function(){this.props.recording&&this.endRecord(),this.props.playing=!1,this._cancelTimeouts()},q.prototype.togglePlay=function(){this.props.playing?this.pause():this.play()},q.prototype.stop=function(){this.pause(),this.props.frame=0,this.props.playhead=0,this.props.time=0,this.props.deltaTime=0,this.props.started=!1,this.render()},q.prototype.record=function(){var t=this;if(!this.props.recording)if(h()){this.stop(),this.props.playing=!0,this.props.recording=!0;var e=this._createExportOptions({sequence:!0}),n=1/this.props.fps;this._cancelTimeouts();var r,i=function(){return t.props.recording?(t.props.deltaTime=n,t.tick(),t.exportFrame(e).then((function(){t.props.recording&&(t.props.deltaTime=0,t.props.frame++,t.props.frame<t.props.totalFrames?(t.props.time+=n,t.props.playhead=t._computePlayhead(t.props.time,t.props.duration),t._recordTimeout=setTimeout(i,0)):(console.log("Finished recording"),t._signalEnd(),t.endRecord(),t.stop(),t.run()))}))):Promise.resolve()};this.props.started||(this._signalBegin(),this.props.started=!0),this.sketch&&"function"===typeof this.sketch.beginRecord&&this._wrapContextScale((function(e){return t.sketch.beginRecord(e)})),(r=e,void 0===r&&(r={}),j(!0,r)).catch((function(t){console.error(t)})).then((function(e){t._raf=window.requestAnimationFrame(i)}))}else console.error("[canvas-sketch] WARN: Recording from Node.js is not yet supported")},q.prototype._signalBegin=function(){var t=this;this.sketch&&"function"===typeof this.sketch.begin&&this._wrapContextScale((function(e){return t.sketch.begin(e)}))},q.prototype._signalEnd=function(){var t=this;this.sketch&&"function"===typeof this.sketch.end&&this._wrapContextScale((function(e){return t.sketch.end(e)}))},q.prototype.endRecord=function(){var t,e=this,n=this.props.recording;return this._cancelTimeouts(),this.props.recording=!1,this.props.deltaTime=0,this.props.playing=!1,(void 0===t&&(t={}),j(!1,t)).catch((function(t){console.error(t)})).then((function(){n&&e.sketch&&"function"===typeof e.sketch.endRecord&&e._wrapContextScale((function(t){return e.sketch.endRecord(t)}))}))},q.prototype._createExportOptions=function(t){return void 0===t&&(t={}),{sequence:t.sequence,save:t.save,fps:this.props.fps,frame:t.sequence?this.props.frame:void 0,file:this.settings.file,name:this.settings.name,prefix:this.settings.prefix,suffix:this.settings.suffix,encoding:this.settings.encoding,encodingQuality:this.settings.encodingQuality,timeStamp:t.timeStamp||w(new Date,"yyyy.mm.dd-HH.MM.ss"),totalFrames:isFinite(this.props.totalFrames)?Math.max(0,this.props.totalFrames):1e3}},q.prototype.exportFrame=function(t){var e=this;if(void 0===t&&(t={}),!this.sketch)return Promise.all([]);"function"===typeof this.sketch.preExport&&this.sketch.preExport();var n=this._createExportOptions(t),r=f(),i=Promise.resolve();if(r&&t.commit&&"function"===typeof r.commit){var a=o({},n),s=r.commit(a);i=c(s)?s:Promise.resolve(s)}return i.then((function(t){return e._doExportFrame(o({},n,{hash:t||""}))})).then((function(t){return 1===t.length?t[0]:t}))},q.prototype._doExportFrame=function(t){var e=this;void 0===t&&(t={}),this._props.exporting=!0,this.resize();var n=this.render(),r=this.props.canvas;return"undefined"===typeof n&&(n=[r]),n=(n=[].concat(n).filter(Boolean)).map((function(e){var n,r="object"===typeof e&&e&&("data"in e||"dataURL"in e),i=r?e.data:e,a=r?o({},e,{data:i}):{data:i};if(p(n=i)&&/canvas/i.test(n.nodeName)&&"function"===typeof n.getContext){var s=function(t,e){void 0===e&&(e={});var n=e.encoding||"image/png";if(!T.includes(n))throw new Error("Invalid canvas encoding "+n);var r=(n.split("/")[1]||"").replace(/jpeg/i,"jpg");return r&&(r=("."+r).toLowerCase()),{extension:r,type:n,dataURL:t.toDataURL(n,e.encodingQuality)}}(i,{encoding:a.encoding||t.encoding,encodingQuality:l(a.encodingQuality,t.encodingQuality,.95)}),u=s.dataURL,c=s.extension,f=s.type;return Object.assign(a,{dataURL:u,extension:c,type:f})}return a})),this._props.exporting=!1,this.resize(),this.render(),Promise.all(n.map((function(e,n,r){var i=o({extension:"",prefix:"",suffix:""},t,e,{layer:n,totalLayers:r.length}),a=!1!==t.save&&e.save;for(var s in i.save=!1!==a,i.filename=E(i),delete i.encoding,delete i.encodingQuality,i)"undefined"===typeof i[s]&&delete i[s];var u=Promise.resolve({});if(i.save){var c=i.data;u=i.dataURL?k(i.dataURL,i):function(t,e){void 0===e&&(e={});var n=Array.isArray(t)?t:[t];return S(new window.Blob(n,{type:e.type||""}),e)}(c,i)}return u.then((function(t){return Object.assign({},i,t)}))}))).then((function(n){var r=n.filter((function(t){return t.save}));if(r.length>0){var i,o=r.find((function(t){return t.outputName})),a=r.some((function(t){return t.client})),s=r.some((function(t){return t.stream}));i=r.length>1?r.length:o?o.outputName+"/"+r[0].filename:""+r[0].filename;var u="";t.sequence?u=isFinite(e.props.totalFrames)?" (frame "+(t.frame+1)+" / "+e.props.totalFrames+")":" (frame "+t.frame+")":r.length>1&&(u=" files");var c=a?"canvas-sketch-cli":"canvas-sketch",p=s?"Streaming into":"Exported";console.log("%c["+c+"]%c "+p+" %c"+i+"%c"+u,"color: #8e8e8e;","color: initial;","font-weight: bold;","font-weight: initial;")}return"function"===typeof e.sketch.postExport&&e.sketch.postExport(),n}))},q.prototype._wrapContextScale=function(t){this._preRender(),t(this.props),this._postRender()},q.prototype._preRender=function(){var t=this.props;this.props.gl||!t.context||t.p5?t.p5&&t.p5.scale(t.scaleX/t.pixelRatio,t.scaleY/t.pixelRatio):(t.context.save(),!1!==this.settings.scaleContext&&t.context.scale(t.scaleX,t.scaleY))},q.prototype._postRender=function(){var t=this.props;this.props.gl||!t.context||t.p5||t.context.restore(),t.gl&&!1!==this.settings.flush&&!t.p5&&t.gl.flush()},q.prototype.tick=function(){this.sketch&&"function"===typeof this.sketch.tick&&(this._preRender(),this.sketch.tick(this.props),this._postRender())},q.prototype.render=function(){return this.props.p5?(this._lastRedrawResult=void 0,this.props.p5.redraw(),this._lastRedrawResult):this.submitDrawCall()},q.prototype.submitDrawCall=function(){if(this.sketch){var t,e=this.props;return this._preRender(),"function"===typeof this.sketch?t=this.sketch(e):"function"===typeof this.sketch.render&&(t=this.sketch.render(e)),this._postRender(),t}},q.prototype.update=function(t){var e=this;void 0===t&&(t={});var n=["animate"];Object.keys(t).forEach((function(t){if(n.indexOf(t)>=0)throw new Error("Sorry, the { "+t+" } option is not yet supported with update().")}));var r=this._settings.canvas,i=this._settings.context;for(var o in t){var a=t[o];"undefined"!==typeof a&&(e._settings[o]=a)}var s=Object.assign({},this._settings,t);if("time"in t&&"frame"in t)throw new Error("You should specify { time } or { frame } but not both");if("time"in t?delete s.frame:"frame"in t&&delete s.time,"duration"in t&&"totalFrames"in t)throw new Error("You should specify { duration } or { totalFrames } but not both");"duration"in t?delete s.totalFrames:"totalFrames"in t&&delete s.duration,"data"in t&&(this._props.data=t.data);var u=this.getTimeProps(s);if(Object.assign(this._props,u),r!==this._settings.canvas||i!==this._settings.context){var c=U(this._settings),p=c.canvas,f=c.context;this.props.canvas=p,this.props.context=f,this._setupGLKey(),this._appendCanvasIfNeeded()}return t.p5&&"function"!==typeof t.p5&&(this.props.p5=t.p5,this.props.p5.draw=function(){e._isP5Resizing||(e._lastRedrawResult=e.submitDrawCall())}),"playing"in t&&(t.playing?this.play():this.pause()),F(this._settings),this.resize(),this.render(),this.props},q.prototype.resize=function(){var t=this._getSizeProps(),e=this.settings,n=this.props,r=I(n,e);Object.assign(this._props,r);var i=this.props,o=i.pixelRatio,a=i.canvasWidth,s=i.canvasHeight,u=i.styleWidth,c=i.styleHeight,p=this.props.canvas;p&&!1!==e.resizeCanvas&&(n.p5?p.width===a&&p.height===s||(this._isP5Resizing=!0,n.p5.pixelDensity(o),n.p5.resizeCanvas(a/o,s/o,!1),this._isP5Resizing=!1):(p.width!==a&&(p.width=a),p.height!==s&&(p.height=s)),h()&&!1!==e.styleCanvas&&(p.style.width=u+"px",p.style.height=c+"px"));var f=this._getSizeProps(),l=!g(t,f);return l&&this._sizeChanged(),l},q.prototype._sizeChanged=function(){this.sketch&&"function"===typeof this.sketch.resize&&this.sketch.resize(this.props)},q.prototype.animate=function(){if(this.props.playing)if(h()){this._raf=window.requestAnimationFrame(this._animateHandler);var t=u(),e=1e3/this.props.fps,n=t-this._lastTime,r=this.props.duration,i="number"===typeof r&&isFinite(r),o=!0,a=this.settings.playbackRate;"fixed"===a?n=e:"throttle"===a?n>e?(t-=n%e,this._lastTime=t):o=!1:this._lastTime=t;var s=n/1e3,c=this.props.time+s*this.props.timeScale;c<0&&i&&(c=r+c);var p=!1,f=!1,l=!1!==this.settings.loop;if(i&&c>=r&&(l?(o=!0,c%=r,f=!0):(o=!1,c=r,p=!0),this._signalEnd()),o){this.props.deltaTime=s,this.props.time=c,this.props.playhead=this._computePlayhead(c,r);var d=this.props.frame;this.props.frame=this._computeCurrentFrame(),f&&this._signalBegin(),d!==this.props.frame&&this.tick(),this.render(),this.props.deltaTime=0}p&&this.pause()}else console.error("[canvas-sketch] WARN: Animation in Node.js is not yet supported")},q.prototype.dispatch=function(t){if("function"!==typeof t)throw new Error("must pass function into dispatch()");t(this.props),this.render()},q.prototype.mount=function(){this._appendCanvasIfNeeded()},q.prototype.unmount=function(){h()&&(window.removeEventListener("resize",this._resizeHandler),this._keyboardShortcuts.detach()),this.props.canvas.parentElement&&this.props.canvas.parentElement.removeChild(this.props.canvas)},q.prototype._appendCanvasIfNeeded=function(){h()&&!1!==this.settings.parent&&this.props.canvas&&!this.props.canvas.parentElement&&(this.settings.parent||document.body).appendChild(this.props.canvas)},q.prototype._setupGLKey=function(){var t;this.props.context&&("function"===typeof(t=this.props.context).clear&&"function"===typeof t.clearColor&&"function"===typeof t.bufferData?this._props.gl=this.props.context:delete this._props.gl)},q.prototype.getTimeProps=function(t){void 0===t&&(t={});var e=t.duration,n=t.totalFrames,r=l(t.timeScale,1),i=l(t.fps,24),o="number"===typeof e&&isFinite(e),a="number"===typeof n&&isFinite(n),s=o?Math.floor(i*e):void 0,u=a?n/i:void 0;if(o&&a&&s!==n)throw new Error("You should specify either duration or totalFrames, but not both. Or, they must match exactly.");"undefined"===typeof t.dimensions&&"undefined"!==typeof t.units&&console.warn("You've specified a { units } setting but no { dimension }, so the units will be ignored."),n=l(n,s,1/0),e=l(e,u,1/0);var c=t.time,p=t.frame,f="number"===typeof c&&isFinite(c),h="number"===typeof p&&isFinite(p),d=0,v=0,m=0;if(f&&h)throw new Error("You should specify either start frame or time, but not both.");return f?(d=c,m=this._computePlayhead(d,e),v=this._computeFrame(m,d,n,i)):h&&(d=(v=p)/i,m=this._computePlayhead(d,e)),{playhead:m,time:d,frame:v,duration:e,totalFrames:n,fps:i,timeScale:r}},q.prototype.setup=function(t){var e=this;if(void 0===t&&(t={}),this.sketch)throw new Error("Multiple setup() calls not yet supported.");this._settings=Object.assign({},t,this._settings),F(this._settings);var n=U(this._settings),r=n.context,i=n.canvas,o=this.getTimeProps(this._settings);this._props=Object.assign({},o,{canvas:i,context:r,deltaTime:0,started:!1,exporting:!1,playing:!1,recording:!1,settings:this.settings,data:this.settings.data,render:function(){return e.render()},togglePlay:function(){return e.togglePlay()},dispatch:function(t){return e.dispatch(t)},tick:function(){return e.tick()},resize:function(){return e.resize()},update:function(t){return e.update(t)},exportFrame:function(t){return e.exportFrame(t)},record:function(){return e.record()},play:function(){return e.play()},pause:function(){return e.pause()},stop:function(){return e.stop()}}),this._setupGLKey(),this.resize()},q.prototype.loadAndRun=function(t,e){var n=this;return this.load(t,e).then((function(){return n.run(),n}))},q.prototype.unload=function(){var t=this;this.pause(),this.sketch&&("function"===typeof this.sketch.unload&&this._wrapContextScale((function(e){return t.sketch.unload(e)})),this._sketch=null)},q.prototype.destroy=function(){this.unload(),this.unmount()},q.prototype.load=function(t,e){var n=this;if("function"!==typeof t)throw new Error("The function must take in a function as the first parameter. Example:\n  canvasSketcher(() => { ... }, settings)");this.sketch&&this.unload(),"undefined"!==typeof e&&this.update(e),this._preRender();var r=Promise.resolve();if(this.settings.p5){if(!h())throw new Error("[canvas-sketch] ERROR: Using p5.js in Node.js is not supported");r=new Promise((function(t){var e,r=n.settings.p5;r.p5&&(e=r.preload,r=r.p5);var i=function(r){e&&(r.preload=function(){return e(r)}),r.setup=function(){var e=n.props,i="webgl"===n.settings.context,o=i?r.WEBGL:r.P2D;r.noLoop(),r.pixelDensity(e.pixelRatio),r.createCanvas(e.viewportWidth,e.viewportHeight,o),i&&n.settings.attributes&&r.setAttributes(n.settings.attributes),n.update({p5:r,canvas:r.canvas,context:r._renderer.drawingContext}),t()}};if("function"===typeof r)new r(i);else{if("function"!==typeof window.createCanvas)throw new Error("{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\nnew p5(); // <-- attaches to global scope");i(window)}}))}return r.then((function(){var e=t(n.props);return c(e)||(e=Promise.resolve(e)),e})).then((function(t){return t||(t={}),n._sketch=t,h()&&(n._keyboardShortcuts.attach(),window.addEventListener("resize",n._resizeHandler)),n._postRender(),n._sizeChanged(),n})).catch((function(t){throw console.warn("Could not start sketch, the async loading function rejected with an error:\n    Error: "+t.message),t}))},Object.defineProperties(q.prototype,W);var Y="hot-id-cache",B=[];function $(t,e){if(void 0===e&&(e={}),e.p5){if(e.canvas||e.context&&"string"!==typeof e.context)throw new Error('In { p5 } mode, you can\'t pass your own canvas or context, unless the context is a "webgl" or "2d" string');var n="string"===typeof e.context&&e.context;e=Object.assign({},e,{canvas:!1,context:n})}var r,i=function(){var t=f();return t&&t.hot}();i&&(r=l(e.id,"$__DEFAULT_CANVAS_SKETCH_ID__$"));var o=i&&"string"===typeof r;o&&B.includes(r)&&(console.warn("Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. ",r),o=!1);var a=Promise.resolve();if(o){B.push(r);var s=function(t){var e=f();if(e)return e[Y]=e[Y]||{},e[Y][t]}(r);if(s){var u=function(){var t,n=(t=s.manager,e.animate?{time:t.props.time}:void 0);return s.manager.destroy(),n};a=s.load.then(u).catch(u)}}return a.then((function(n){var i,a=new q;return t?(e=Object.assign({},e,n),a.setup(e),a.mount(),i=a.loadAndRun(t)):i=Promise.resolve(a),o&&function(t,e){var n=f();n&&(n[Y]=n[Y]||{},n[Y][t]=e)}(r,{load:i,manager:a}),i}))}return $.canvasSketch=$,$.PaperSizes=R,$},t.exports=n()}).call(this,n(4))},function(t,e,n){var r=n(22),i=n(23),o=n(24);t.exports=function t(e){e=o(e,null);var n,a,s,u=Math.random,c=null,p=!1;return f(e),{value:l,createRandom:function(e){return t(e)},setSeed:f,getSeed:function(){return n},getRandomSeed:function(){return String(Math.floor(1e6*Math.random()))},valueNonZero:function(){var t=0;for(;0===t;)t=l();return t},permuteNoise:function(){s=h()},noise1D:function(t,e,n){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");return e=o(e,1),(n=o(n,1))*s.noise2D(t*e,0)},noise2D:function(t,e,n,r){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");return n=o(n,1),(r=o(r,1))*s.noise2D(t*n,e*n)},noise3D:function(t,e,n,r,i){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");if(!isFinite(n))throw new TypeError("z component for noise() must be finite");return r=o(r,1),(i=o(i,1))*s.noise3D(t*r,e*r,n*r)},noise4D:function(t,e,n,r,i,a){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");if(!isFinite(n))throw new TypeError("z component for noise() must be finite");if(!isFinite(r))throw new TypeError("w component for noise() must be finite");return i=o(i,1),(a=o(a,1))*s.noise4D(t*i,e*i,n*i,r*i)},sign:function(){return d()?1:-1},boolean:d,chance:function(t){if("number"!==typeof(t=o(t,.5)))throw new TypeError("expected n to be a number");return l()<t},range:v,rangeFloor:m,pick:function(t){return 0===t.length?void 0:t[m(0,t.length)]},shuffle:function(t){if(!Array.isArray(t))throw new TypeError("Expected Array, got "+typeof t);var e,n,r=t.length,i=t.slice();for(;r;)e=Math.floor(l()*r--),n=i[r],i[r]=i[e],i[e]=n;return i},onCircle:y,insideCircle:function(t,e){t=o(t,1),y(1,e=e||[]);var n=t*Math.sqrt(l());return e[0]*=n,e[1]*=n,e},onSphere:function(t,e){t=o(t,1),e=e||[];var n=l()*Math.PI*2,r=2*l()-1,i=n,a=Math.acos(r);return e[0]=t*Math.sin(a)*Math.cos(i),e[1]=t*Math.sin(a)*Math.sin(i),e[2]=t*Math.cos(a),e},insideSphere:function(t,e){t=o(t,1),e=e||[];var n=l()*Math.PI*2,r=2*l()-1,i=l(),a=n,s=Math.acos(r),u=t*Math.cbrt(i);return e[0]=u*Math.sin(s)*Math.cos(a),e[1]=u*Math.sin(s)*Math.sin(a),e[2]=u*Math.cos(s),e},quaternion:function(t){t=t||[];var e=l(),n=l(),r=l(),i=Math.sqrt(1-e),o=Math.sqrt(e),a=2*Math.PI*n,s=2*Math.PI*r,u=Math.sin(a)*i,c=Math.cos(a)*i,p=Math.sin(s)*o,f=Math.cos(s)*o;return t[0]=u,t[1]=c,t[2]=p,t[3]=f,t},weighted:w,weightedSet:function(t){return 0===(t=t||[]).length?null:t[g(t)].value},weightedSetIndex:g,gaussian:function(t,e){if(t=o(t,0),e=o(e,1),p){p=!1;var n=c;return c=null,t+e*n}var r=0,i=0,a=0;do{r=2*l()-1,i=2*l()-1,a=r*r+i*i}while(a>=1||0===a);var s=Math.sqrt(-2*Math.log(a)/a);return c=i*s,p=!0,t+e*(r*s)}};function f(t,e){"number"===typeof t||"string"===typeof t?a=r(n=t,e):(n=void 0,a=u),s=h(),c=null,p=!1}function l(){return a()}function h(){return new i(a)}function d(){return l()>.5}function v(t,e){if(void 0===e&&(e=t,t=0),"number"!==typeof t||"number"!==typeof e)throw new TypeError("Expected all arguments to be numbers");return l()*(e-t)+t}function m(t,e){if(void 0===e&&(e=t,t=0),"number"!==typeof t||"number"!==typeof e)throw new TypeError("Expected all arguments to be numbers");return Math.floor(v(t,e))}function y(t,e){t=o(t,1),e=e||[];var n=2*l()*Math.PI;return e[0]=t*Math.cos(n),e[1]=t*Math.sin(n),e}function g(t){return 0===(t=t||[]).length?-1:w(t.map((function(t){return t.weight})))}function w(t){if(0===(t=t||[]).length)return-1;var e,n=0;for(e=0;e<t.length;e++)n+=t[e];if(n<=0)throw new Error("Weights must sum to > 0");var r=l()*n;for(e=0;e<t.length;e++){if(r<t[e])return e;r-=t[e]}return 0}}()},function(t,e,n){var r=n(25);t.exports=function(t,e,n){return null==t?t:r(t,e,n)}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,n){"use strict";(function(e){var n=[],r="undefined"===typeof e?window:e,i=Math.pow(256,6),o=Math.pow(2,52),a=2*o,s=Math.random;function u(t){var e,n=t.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];for(n||(t=[n++]);i<256;)a[i]=i++;for(i=0;i<256;i++)a[i]=a[o=255&o+t[i%n]+(e=a[i])],a[o]=e;(r.g=function(t){for(var e,n=0,i=r.i,o=r.j,a=r.S;t--;)e=a[i=255&i+1],n=256*n+a[255&(a[i]=a[o=255&o+e])+(a[o]=e)];return r.i=i,r.j=o,n})(256)}function c(t,e){var n,r=[],i=(typeof t)[0];if(e&&"o"==i)for(n in t)try{r.push(c(t[n],e-1))}catch(o){}return r.length?r:"s"==i?t:t+"\0"}function p(t,e){for(var n,r=t+"",i=0;i<r.length;)e[255&i]=255&(n^=19*e[255&i])+r.charCodeAt(i++);return l(e)}function f(t){try{return r.crypto.getRandomValues(t=new Uint8Array(256)),l(t)}catch(e){return[+new Date,r,r.navigator&&r.navigator.plugins,r.screen,l(n)]}}function l(t){return String.fromCharCode.apply(0,t)}t.exports=function(e,r){if(r&&!0===r.global)return r.global=!1,Math.random=t.exports(e,r),r.global=!0,Math.random;var s=r&&r.entropy||!1,h=[],d=(p(c(s?[e,l(n)]:0 in arguments?e:f(),3),h),new u(h));return p(l(d.S),n),function(){for(var t=d.g(6),e=i,n=0;t<o;)t=256*(t+n),e*=256,n=d.g(1);for(;t>=a;)t/=2,e/=2,n>>>=1;return(t+n)/e}},t.exports.resetGlobal=function(){Math.random=s},p(Math.random(),n)}).call(this,n(4))},function(t,e,n){var r;!function(){"use strict";var i=.5*(Math.sqrt(3)-1),o=(3-Math.sqrt(3))/6,a=1/6,s=(Math.sqrt(5)-1)/4,u=(5-Math.sqrt(5))/20;function c(t){var e;e="function"==typeof t?t:t?function(){var t=0,e=0,n=0,r=1,i=f();t=i(" "),e=i(" "),n=i(" ");for(var o=0;o<arguments.length;o++)(t-=i(arguments[o]))<0&&(t+=1),(e-=i(arguments[o]))<0&&(e+=1),(n-=i(arguments[o]))<0&&(n+=1);return i=null,function(){var i=2091639*t+2.3283064365386963e-10*r;return t=e,e=n,n=i-(r=0|i)}}(t):Math.random,this.p=p(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}function p(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var r=e+~~(t()*(256-e)),i=n[e];n[e]=n[r],n[r]=i}return n}function f(){var t=4022871197;return function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}}c.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var n,r,a=this.permMod12,s=this.perm,u=this.grad3,c=0,p=0,f=0,l=(t+e)*i,h=Math.floor(t+l),d=Math.floor(e+l),v=(h+d)*o,m=t-(h-v),y=e-(d-v);m>y?(n=1,r=0):(n=0,r=1);var g=m-n+o,w=y-r+o,x=m-1+2*o,b=y-1+2*o,_=255&h,M=255&d,T=.5-m*m-y*y;if(T>=0){var j=3*a[_+s[M]];c=(T*=T)*T*(u[j]*m+u[j+1]*y)}var k=.5-g*g-w*w;if(k>=0){var S=3*a[_+n+s[M+r]];p=(k*=k)*k*(u[S]*g+u[S+1]*w)}var E=.5-x*x-b*b;if(E>=0){var P=3*a[_+1+s[M+1]];f=(E*=E)*E*(u[P]*x+u[P+1]*b)}return 70*(c+p+f)},noise3D:function(t,e,n){var r,i,o,s,u,c,p,f,l,h,d=this.permMod12,v=this.perm,m=this.grad3,y=(t+e+n)*(1/3),g=Math.floor(t+y),w=Math.floor(e+y),x=Math.floor(n+y),b=(g+w+x)*a,_=t-(g-b),M=e-(w-b),T=n-(x-b);_>=M?M>=T?(u=1,c=0,p=0,f=1,l=1,h=0):_>=T?(u=1,c=0,p=0,f=1,l=0,h=1):(u=0,c=0,p=1,f=1,l=0,h=1):M<T?(u=0,c=0,p=1,f=0,l=1,h=1):_<T?(u=0,c=1,p=0,f=0,l=1,h=1):(u=0,c=1,p=0,f=1,l=1,h=0);var j=_-u+a,k=M-c+a,S=T-p+a,E=_-f+2*a,P=M-l+2*a,O=T-h+2*a,F=_-1+.5,R=M-1+.5,C=T-1+.5,A=255&g,D=255&w,z=255&x,N=.6-_*_-M*M-T*T;if(N<0)r=0;else{var H=3*d[A+v[D+v[z]]];r=(N*=N)*N*(m[H]*_+m[H+1]*M+m[H+2]*T)}var I=.6-j*j-k*k-S*S;if(I<0)i=0;else{var L=3*d[A+u+v[D+c+v[z+p]]];i=(I*=I)*I*(m[L]*j+m[L+1]*k+m[L+2]*S)}var U=.6-E*E-P*P-O*O;if(U<0)o=0;else{var q=3*d[A+f+v[D+l+v[z+h]]];o=(U*=U)*U*(m[q]*E+m[q+1]*P+m[q+2]*O)}var W=.6-F*F-R*R-C*C;if(W<0)s=0;else{var Y=3*d[A+1+v[D+1+v[z+1]]];s=(W*=W)*W*(m[Y]*F+m[Y+1]*R+m[Y+2]*C)}return 32*(r+i+o+s)},noise4D:function(t,e,n,r){var i,o,a,c,p,f,l,h,d,v,m,y,g,w,x,b,_,M=this.perm,T=this.grad4,j=(t+e+n+r)*s,k=Math.floor(t+j),S=Math.floor(e+j),E=Math.floor(n+j),P=Math.floor(r+j),O=(k+S+E+P)*u,F=t-(k-O),R=e-(S-O),C=n-(E-O),A=r-(P-O),D=0,z=0,N=0,H=0;F>R?D++:z++,F>C?D++:N++,F>A?D++:H++,R>C?z++:N++,R>A?z++:H++,C>A?N++:H++;var I=F-(f=D>=3?1:0)+u,L=R-(l=z>=3?1:0)+u,U=C-(h=N>=3?1:0)+u,q=A-(d=H>=3?1:0)+u,W=F-(v=D>=2?1:0)+2*u,Y=R-(m=z>=2?1:0)+2*u,B=C-(y=N>=2?1:0)+2*u,$=A-(g=H>=2?1:0)+2*u,G=F-(w=D>=1?1:0)+3*u,K=R-(x=z>=1?1:0)+3*u,X=C-(b=N>=1?1:0)+3*u,Q=A-(_=H>=1?1:0)+3*u,Z=F-1+4*u,J=R-1+4*u,V=C-1+4*u,tt=A-1+4*u,et=255&k,nt=255&S,rt=255&E,it=255&P,ot=.6-F*F-R*R-C*C-A*A;if(ot<0)i=0;else{var at=M[et+M[nt+M[rt+M[it]]]]%32*4;i=(ot*=ot)*ot*(T[at]*F+T[at+1]*R+T[at+2]*C+T[at+3]*A)}var st=.6-I*I-L*L-U*U-q*q;if(st<0)o=0;else{var ut=M[et+f+M[nt+l+M[rt+h+M[it+d]]]]%32*4;o=(st*=st)*st*(T[ut]*I+T[ut+1]*L+T[ut+2]*U+T[ut+3]*q)}var ct=.6-W*W-Y*Y-B*B-$*$;if(ct<0)a=0;else{var pt=M[et+v+M[nt+m+M[rt+y+M[it+g]]]]%32*4;a=(ct*=ct)*ct*(T[pt]*W+T[pt+1]*Y+T[pt+2]*B+T[pt+3]*$)}var ft=.6-G*G-K*K-X*X-Q*Q;if(ft<0)c=0;else{var lt=M[et+w+M[nt+x+M[rt+b+M[it+_]]]]%32*4;c=(ft*=ft)*ft*(T[lt]*G+T[lt+1]*K+T[lt+2]*X+T[lt+3]*Q)}var ht=.6-Z*Z-J*J-V*V-tt*tt;if(ht<0)p=0;else{var dt=M[et+1+M[nt+1+M[rt+1+M[it+1]]]]%32*4;p=(ht*=ht)*ht*(T[dt]*Z+T[dt+1]*J+T[dt+2]*V+T[dt+3]*tt)}return 27*(i+o+a+c+p)}},c._buildPermutationTable=p,void 0===(r=function(){return c}.call(e,n,e,t))||(t.exports=r),e.SimplexNoise=c,t.exports=c}()},function(t,e){t.exports=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}},function(t,e,n){var r=n(26),i=n(13),o=n(66),a=n(8),s=n(14);t.exports=function(t,e,n,u){if(!a(t))return t;for(var c=-1,p=(e=i(e,t)).length,f=p-1,l=t;null!=l&&++c<p;){var h=s(e[c]),d=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return t;if(c!=f){var v=l[h];void 0===(d=u?u(v,h,l):void 0)&&(d=a(v)?v:o(e[c+1])?[]:{})}r(l,h,d),l=l[h]}return t}},function(t,e,n){var r=n(27),i=n(12),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(28);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(5),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},function(t,e,n){var r=n(30),i=n(34),o=n(8),a=n(36),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,p=u.toString,f=c.hasOwnProperty,l=RegExp("^"+p.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?l:s).test(a(t))}},function(t,e,n){var r=n(11),i=n(8);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(4))},function(t,e,n){var r=n(6),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(35),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(7)["__core-js_shared__"];t.exports=r},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(9),i=n(10),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=n(41),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(42);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(43);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(44),i=n(58),o=n(60),a=n(61),s=n(62);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(45),i=n(51),o=n(57);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(46),i=n(47),o=n(48),a=n(49),s=n(50);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(0);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(0),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(0),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(0);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(52),i=n(53),o=n(54),a=n(55),s=n(56);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(1),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(1);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(1);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(1);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(5)(n(7),"Map");t.exports=r},function(t,e,n){var r=n(2);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(2);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(2);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(2);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(64);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(6),i=n(65),o=n(9),a=n(10),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(13),i=n(14);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e,n){"use strict";n.r(e);var r=n(15),i=n.n(r),o=n(16),a=n.n(o),s=n(17),u=n.n(s),c=n(18),p=n.n(c),f=n(3),l=n.n(f),h=new(window.AudioContext||window.webkitAudioContext);function d(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=h.createOscillator(),o=h.createGain();i.connect(o),i.type=e,o.connect(h.destination),i.frequency.value=t,i.start(),o.gain.value=r,o.gain.exponentialRampToValueAtTime(1e-5,h.currentTime+n),setTimeout((function(){i.stop(),i.disconnect()}),1e3*(n+.5))}function v(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var y={canvas:document.querySelector("#canvas"),dimensions:[600,600],animate:!0},g=["#556270","#4ecdc4","#c7f464","#ff6b6b","#c44d58"],w=[[[0,0],[1,0]],[[1,0],[1,1]],[[0,0],[0,1]],[[0,1],[1,1]]];a()((function(t){var e,n,r=t.width,o=t.height,a=t.canvas,s=.05*r,c=0,f=!0,h=-1,m=0,y=[],x=[],b=Math.floor(r/s),_=Math.floor(o/s),M=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];r.push(e);for(var i=function(){var i=a[o],s={x:e.x+i[0],y:e.y+i[1]};if(!r.find((function(t){return t.x===s.x&&t.y===s.y}))){var u=l()(x,[s.y,s.x]);if(u&&u.pride===n){var c=u.pride;t(u,c,r)}}},o=0,a=[[-1,0],[0,-1],[1,0],[0,1]];o<a.length;o++)i()},T=function(t){y=[],c+=Math.pow(t.length,2);var e,n=v(t);try{for(n.s();!(e=n.n()).done;){e.value.pride=void 0}}catch(g){n.e(g)}finally{n.f()}for(var r=function(t){for(var e=[],n=0;n<b;n+=1)e.push(x[n][t]);(e=e.sort((function(t){return void 0===t.pride?-1:1}))).forEach((function(e,n){e.y=n,x[n][t]=e}))},i=0;i<_;i+=1)r(i);var o=[];x[b-1].forEach((function(t,e){void 0===t.pride&&o.push(e)}));for(var a=0;a<b;a+=1){var s=x[a];s=(s=s.sort((function(t){return o.includes(t.x)?-1:1}))).map((function(t,e){return t.x=e,t})),x[a]=s}for(var u=0;u<b;u+=1){for(var p=x[u],l=0;l<_;l+=1){var d=p[l];d.x-=o.length,d.x<0&&(d.x=_+d.x)}x[u]=p.sort((function(t,e){return t.x-e.x}))}(function(){for(var t=!1,e=0;e<b&&!t;e+=1)for(var n=0;n<_;n+=1){var r=x[e][n];if(void 0!==r.pride){var i=[];if(M(r,r.pride,i),i.length>1){t=!0;break}}}return t})()||(f=!0,h=m)};return a.addEventListener("click",(function(t){if(f)m-h>1&&(!function(){c=0;for(var t=0;t<b;t+=1)for(var e=0;e<_;e+=1)p()(x,[t,e],{x:e,y:t,pixelX:e*s,pixelY:t*s,pride:u.a.rangeFloor(0,4)})}(),f=!1,d(200,"sine",.9));else{var e=t.target.getBoundingClientRect(),n=e.width/r,i=e.height/o,v=Math.floor((t.clientX-e.left)/(s*n)),y=Math.floor((t.clientY-e.top)/(s*i)),g=l()(x,[y,v]);if(g&&void 0!==g.pride){var w=g.pride,j=[];M(g,w,j),j.length>1&&(d(349.2+50*j.length,"sine",.12),T(j),a.dispatchEvent(new Event("mousemove",t)))}}})),a.addEventListener("mousemove",(function(t){if(!f){var a=t.target.getBoundingClientRect(),u=a.width/r,c=a.height/o,p=Math.floor((t.clientX-a.left)/(s*u)),h=Math.floor((t.clientY-a.top)/(s*c));if(e!==p||n!==h){e=p,n=h,y=[];for(var d=0;d<b;d+=1)for(var m=0;m<_;m+=1)x[d][m].highlight=!1;var g=l()(x,[h,p]);if(g&&void 0!==g.pride){var T=g.pride,j=[];M(g,T,j),j.length>1&&j.forEach((function(t){t.highlight=!0}))}for(var k=0;k<b;k+=1)for(var S=0;S<_;S+=1){var E=x[k][S];if(E.highlight){var P,O=v(w);try{var F=function(){var t=i()(P.value,2),e=t[0],n=t[1],r=[[E.x+e[0],E.y+e[1]],[E.x+n[0],E.y+n[1]]],o=y.findIndex((function(t){return t[0][0]===r[0][0]&&t[0][1]===r[0][1]&&t[1][0]===r[1][0]&&t[1][1]===r[1][1]}));-1===o?y.push(r):y=y.filter((function(t,e){return e!==o}))};for(O.s();!(P=O.n()).done;)F()}catch(R){O.e(R)}finally{O.f()}}}}}})),function(t){var e=t.context,n=t.width,r=t.height,i=t.time;m=i,e.fillStyle="hsla(0, 0%, 98%, 1)",e.fillRect(0,0,n,r);for(var o=0;o<x.length;o+=1)for(var a=x[o],u=0;u<a.length;u+=1){var p=a[u];p.pixelY<p.y*s?p.pixelY+=Math.sqrt(p.y*s-p.pixelY):p.pixelY=p.y*s,p.pixelX>p.x*s?p.pixelX-=Math.sqrt(p.pixelX-p.x*s):p.pixelX=p.x*s,g[p.pride]&&(e.fillStyle=g[p.pride],e.fillRect(p.pixelX,p.pixelY,s+.5,s+1))}if(e.lineWidth=1.5,e.lineCap="butt",e.strokeStyle="hsla(0,0%,0%, 0.5)",y.forEach((function(t){e.beginPath(),e.moveTo(t[0][0]*s,t[0][1]*s),e.lineTo(t[1][0]*s,t[1][1]*s),e.stroke()})),f){e.save(),e.translate(n/2,r/2),e.rotate(Math.cos(2*i)/10),e.scale(Math.cos(4*i)/8+1,Math.cos(4*i)/8+1);e.font="bold ".concat(80,"px Arial"),e.textAlign="center",e.shadowBlur=6,e.shadowColor="hsl(0, 0%, 10%)";var l=0===c?"Pixel Mania":"Game Over!";e.fillStyle="rgba(255,0,0,0.4)",e.fillText(l,5*Math.cos(4*i),0),e.fillStyle="rgba(0,255,255,0.4)",e.fillText(l,5*Math.sin(4*i),0),e.fillStyle="hsl(0, 0%, 100%)",e.fillText(l,0,0),e.fillStyle="hsl(0, 0%, 97.5%)",c?(e.font="bold ".concat(60,"px Arial"),e.fillText("Score: ".concat(c),0,70)):(e.font="bold ".concat(50,"px Arial"),e.fillText("Click to start!",0,60)),e.restore()}}}),y)}]);