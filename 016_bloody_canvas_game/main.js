!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){var i=n(6),r=n(7),o=n(8);t.exports=function t(e){e=o(e,null);var n,s,a,c=Math.random,h=null,u=!1;return p(e),{value:f,createRandom:function(e){return t(e)},setSeed:p,getSeed:function(){return n},getRandomSeed:function(){return String(Math.floor(1e6*Math.random()))},valueNonZero:function(){var t=0;for(;0===t;)t=f();return t},permuteNoise:function(){a=l()},noise1D:function(t,e,n){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");return e=o(e,1),(n=o(n,1))*a.noise2D(t*e,0)},noise2D:function(t,e,n,i){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");return n=o(n,1),(i=o(i,1))*a.noise2D(t*n,e*n)},noise3D:function(t,e,n,i,r){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");if(!isFinite(n))throw new TypeError("z component for noise() must be finite");return i=o(i,1),(r=o(r,1))*a.noise3D(t*i,e*i,n*i)},noise4D:function(t,e,n,i,r,s){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");if(!isFinite(n))throw new TypeError("z component for noise() must be finite");if(!isFinite(i))throw new TypeError("w component for noise() must be finite");return r=o(r,1),(s=o(s,1))*a.noise4D(t*r,e*r,n*r,i*r)},sign:function(){return d()?1:-1},boolean:d,chance:function(t){if("number"!==typeof(t=o(t,.5)))throw new TypeError("expected n to be a number");return f()<t},range:m,rangeFloor:y,pick:function(t){return 0===t.length?void 0:t[y(0,t.length)]},shuffle:function(t){if(!Array.isArray(t))throw new TypeError("Expected Array, got "+typeof t);var e,n,i=t.length,r=t.slice();for(;i;)e=Math.floor(f()*i--),n=r[i],r[i]=r[e],r[e]=n;return r},onCircle:v,insideCircle:function(t,e){t=o(t,1),v(1,e=e||[]);var n=t*Math.sqrt(f());return e[0]*=n,e[1]*=n,e},onSphere:function(t,e){t=o(t,1),e=e||[];var n=f()*Math.PI*2,i=2*f()-1,r=n,s=Math.acos(i);return e[0]=t*Math.sin(s)*Math.cos(r),e[1]=t*Math.sin(s)*Math.sin(r),e[2]=t*Math.cos(s),e},insideSphere:function(t,e){t=o(t,1),e=e||[];var n=f()*Math.PI*2,i=2*f()-1,r=f(),s=n,a=Math.acos(i),c=t*Math.cbrt(r);return e[0]=c*Math.sin(a)*Math.cos(s),e[1]=c*Math.sin(a)*Math.sin(s),e[2]=c*Math.cos(a),e},quaternion:function(t){t=t||[];var e=f(),n=f(),i=f(),r=Math.sqrt(1-e),o=Math.sqrt(e),s=2*Math.PI*n,a=2*Math.PI*i,c=Math.sin(s)*r,h=Math.cos(s)*r,u=Math.sin(a)*o,p=Math.cos(a)*o;return t[0]=c,t[1]=h,t[2]=u,t[3]=p,t},weighted:w,weightedSet:function(t){return 0===(t=t||[]).length?null:t[g(t)].value},weightedSetIndex:g,gaussian:function(t,e){if(t=o(t,0),e=o(e,1),u){u=!1;var n=h;return h=null,t+e*n}var i=0,r=0,s=0;do{i=2*f()-1,r=2*f()-1,s=i*i+r*r}while(s>=1||0===s);var a=Math.sqrt(-2*Math.log(s)/s);return h=r*a,u=!0,t+e*(i*a)}};function p(t,e){"number"===typeof t||"string"===typeof t?s=i(n=t,e):(n=void 0,s=c),a=l(),h=null,u=!1}function f(){return s()}function l(){return new r(s)}function d(){return f()>.5}function m(t,e){if(void 0===e&&(e=t,t=0),"number"!==typeof t||"number"!==typeof e)throw new TypeError("Expected all arguments to be numbers");return f()*(e-t)+t}function y(t,e){if(void 0===e&&(e=t,t=0),"number"!==typeof t||"number"!==typeof e)throw new TypeError("Expected all arguments to be numbers");return Math.floor(m(t,e))}function v(t,e){t=o(t,1),e=e||[];var n=2*f()*Math.PI;return e[0]=t*Math.cos(n),e[1]=t*Math.sin(n),e}function g(t){return 0===(t=t||[]).length?-1:w(t.map((function(t){return t.weight})))}function w(t){if(0===(t=t||[]).length)return-1;var e,n=0;for(e=0;e<t.length;e++)n+=t[e];if(n<=0)throw new Error("Weights must sum to > 0");var i=f()*n;for(e=0;e<t.length;e++){if(i<t[e])return e;i-=t[e]}return 0}}()},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},function(t,e,n){var i=n(9),r=n(10),o=n(11);t.exports=function(t,e){return i(t)||r(t,e)||o()}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){var n;n=function(){var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var o=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(e,o){for(var s,a,c=r(e),h=1;h<arguments.length;h++){for(var u in s=Object(arguments[h]))n.call(s,u)&&(c[u]=s[u]);if(t){a=t(s);for(var p=0;p<a.length;p++)i.call(s,a[p])&&(c[a[p]]=s[a[p]])}}return c},s="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}var c=s.performance&&s.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date},h=function(t){return!!t&&("object"===typeof t||"function"===typeof t)&&"function"===typeof t.then},u=function(t){return!(!t||"object"!==typeof t)&&("object"===typeof window&&"object"===typeof window.Node?t instanceof window.Node:"number"===typeof t.nodeType&&"string"===typeof t.nodeName)};function p(){return"undefined"!==typeof window&&window["canvas-sketch-cli"]}function f(){for(var t=arguments,e=0;e<arguments.length;e++)if(null!=t[e])return t[e]}function l(){return"undefined"!==typeof document}var d,m,y=a((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"===typeof Object.keys?Object.keys:n).shim=n})),v=(y.shim,a((function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function i(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?i:r).supported=i,e.unsupported=r}))),g=(v.supported,v.unsupported,a((function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,c;if(i(t)||i(o))return!1;if(t.prototype!==o.prototype)return!1;if(v(t))return!!v(o)&&(t=e.call(t),o=e.call(o),n(t,o,s));if(r(t)){if(!r(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var h=y(t),u=y(o)}catch(p){return!1}if(h.length!=u.length)return!1;for(h.sort(),u.sort(),a=h.length-1;a>=0;a--)if(h[a]!=u[a])return!1;for(a=h.length-1;a>=0;a--)if(c=h[a],!n(t[c],o[c],s))return!1;return typeof t===typeof o}(t,o,s))};function i(t){return null===t||void 0===t}function r(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&"function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0])}}))),w=a((function(t,e){!function(e){var n=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g;return function(c,h,u,p){if(1!==arguments.length||"string"!==s(c)||/\d/.test(c)||(h=c,c=void 0),(c=c||new Date)instanceof Date||(c=new Date(c)),isNaN(c))throw TypeError("Invalid date");var f=(h=String(n.masks[h]||h||n.masks.default)).slice(0,4);"UTC:"!==f&&"GMT:"!==f||(h=h.slice(4),u=!0,"GMT:"===f&&(p=!0));var l=u?"getUTC":"get",d=c[l+"Date"](),m=c[l+"Day"](),y=c[l+"Month"](),v=c[l+"FullYear"](),g=c[l+"Hours"](),w=c[l+"Minutes"](),b=c[l+"Seconds"](),x=c[l+"Milliseconds"](),M=u?0:c.getTimezoneOffset(),k=r(c),_=o(c),T={d:d,dd:i(d),ddd:n.i18n.dayNames[m],dddd:n.i18n.dayNames[m+7],m:y+1,mm:i(y+1),mmm:n.i18n.monthNames[y],mmmm:n.i18n.monthNames[y+12],yy:String(v).slice(2),yyyy:v,h:g%12||12,hh:i(g%12||12),H:g,HH:i(g),M:w,MM:i(w),s:b,ss:i(b),l:i(x,3),L:i(Math.round(x/10)),t:g<12?n.i18n.timeNames[0]:n.i18n.timeNames[1],tt:g<12?n.i18n.timeNames[2]:n.i18n.timeNames[3],T:g<12?n.i18n.timeNames[4]:n.i18n.timeNames[5],TT:g<12?n.i18n.timeNames[6]:n.i18n.timeNames[7],Z:p?"GMT":u?"UTC":(String(c).match(e)||[""]).pop().replace(a,""),o:(M>0?"-":"+")+i(100*Math.floor(Math.abs(M)/60)+Math.abs(M)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10],W:k,N:_};return h.replace(t,(function(t){return t in T?T[t]:t.slice(1,t.length-1)}))}}();function i(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}function r(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var i=e.getTimezoneOffset()-n.getTimezoneOffset();e.setHours(e.getHours()-i);var r=(e-n)/6048e5;return 1+Math.floor(r)}function o(t){var e=t.getDay();return 0===e&&(e=7),e}function s(t){return null===t?"null":void 0===t?"undefined":"object"!==typeof t?typeof t:Array.isArray(t)?"array":{}.toString.call(t).slice(8,-1).toLowerCase()}n.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},n.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},t.exports=n}()})),b="",x=function(t,e){if("string"!==typeof t)throw new TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var n=t.length*e;if(d!==t||"undefined"===typeof d)d=t,b="";else if(b.length>=n)return b.substr(0,n);for(;n>b.length&&e>1;)1&e&&(b+=t),e>>=1,t+=t;return b=(b+=t).substr(0,n)},M=function(){},k={extension:"",prefix:"",suffix:""},_=["image/png","image/jpeg","image/webp"];function T(t,e){return void 0===e&&(e={}),new Promise((function(n,i){e=o({},k,e);var r=E(Object.assign({},e,{extension:"",frame:void 0})),s=t?"streamStart":"streamEnd",a=p();return a&&a.output&&"function"===typeof a[s]?a[s](o({},e,{filename:r})).then((function(t){return n(t)})):n({filename:r,client:!1})}))}function P(t,e){return void 0===e&&(e={}),function(t){return new Promise((function(e){var n=t.indexOf(",");if(-1!==n){for(var i=t.slice(n+1),r=window.atob(i),o=t.slice(0,n),s=/data:([^;]+)/.exec(o),a=(s?s[1]:"")||void 0,c=new ArrayBuffer(r.length),h=new Uint8Array(c),u=0;u<r.length;u++)h[u]=r.charCodeAt(u);e(new window.Blob([c],{type:a}))}else e(new window.Blob)}))}(t).then((function(t){return S(t,e)}))}function S(t,e){return void 0===e&&(e={}),new Promise((function(n){var i=(e=o({},k,e)).filename,r=p();if(r&&"function"===typeof r.saveBlob&&r.output)return r.saveBlob(t,o({},e,{filename:i})).then((function(t){return n(t)}));m||((m=document.createElement("a")).style.visibility="hidden",m.target="_blank"),m.download=i,m.href=window.URL.createObjectURL(t),document.body.appendChild(m),m.onclick=function(){m.onclick=M,setTimeout((function(){window.URL.revokeObjectURL(t),m.parentElement&&m.parentElement.removeChild(m),m.removeAttribute("href"),n({filename:i,client:!1})}))},m.click()}))}function E(t){if(void 0===t&&(t={}),"function"===typeof(t=o({},t)).file)return t.file(t);if(t.file)return t.file;var e,n,i,r,s=null,a="";"string"===typeof t.extension&&(a=t.extension),"number"===typeof t.frame&&(e="number"===typeof t.totalFrames?t.totalFrames:Math.max(1e4,t.frame),n=String(t.frame),i=String(e).length,r="0",n=n.toString(),s="undefined"===typeof i?n:(r=0===r?"0":r?r.toString():" ",x(r,i-n.length)+n));var c=isFinite(t.totalLayers)&&isFinite(t.layer)&&t.totalLayers>1?""+t.layer:"";if(null!=s)return[c,s].filter(Boolean).join("-")+a;var h=t.timeStamp;return[t.prefix,t.name||h,c,t.hash,t.suffix].filter(Boolean).join("-")+a}var O={dimension:"dimensions",animated:"animate",animating:"animate",unit:"units",P5:"p5",pixellated:"pixelated",looping:"loop",pixelPerInch:"pixels"},F=["dimensions","units","pixelsPerInch","orientation","scaleToFit","scaleToView","bleed","pixelRatio","exportPixelRatio","maxPixelRatio","scaleContext","resizeCanvas","styleCanvas","canvas","context","attributes","parent","file","name","prefix","suffix","animate","playing","loop","duration","totalFrames","fps","playbackRate","timeScale","frame","time","flush","pixelated","hotkeys","p5","id","scaleToFitPadding","data","params","encoding","encodingQuality"],j=function(t){Object.keys(t).forEach((function(t){if(t in O){var e=O[t];console.warn('[canvas-sketch] Could not recognize the setting "'+t+'", did you mean "'+e+'"?')}else F.includes(t)||console.warn('[canvas-sketch] Could not recognize the setting "'+t+'"')}))},R=[["postcard",101.6,152.4],["poster-small",280,430],["poster",460,610],["poster-large",610,910],["business-card",50.8,88.9],["2r",64,89],["3r",89,127],["4r",102,152],["5r",127,178],["6r",152,203],["8r",203,254],["10r",254,305],["11r",279,356],["12r",305,381],["a0",841,1189],["a1",594,841],["a2",420,594],["a3",297,420],["a4",210,297],["a5",148,210],["a6",105,148],["a7",74,105],["a8",52,74],["a9",37,52],["a10",26,37],["2a0",1189,1682],["4a0",1682,2378],["b0",1e3,1414],["b1",707,1e3],["b1+",720,1020],["b2",500,707],["b2+",520,720],["b3",353,500],["b4",250,353],["b5",176,250],["b6",125,176],["b7",88,125],["b8",62,88],["b9",44,62],["b10",31,44],["b11",22,32],["b12",16,22],["c0",917,1297],["c1",648,917],["c2",458,648],["c3",324,458],["c4",229,324],["c5",162,229],["c6",114,162],["c7",81,114],["c8",57,81],["c9",40,57],["c10",28,40],["c11",22,32],["c12",16,22],["half-letter",5.5,8.5,"in"],["letter",8.5,11,"in"],["legal",8.5,14,"in"],["junior-legal",5,8,"in"],["ledger",11,17,"in"],["tabloid",11,17,"in"],["ansi-a",8.5,11,"in"],["ansi-b",11,17,"in"],["ansi-c",17,22,"in"],["ansi-d",22,34,"in"],["ansi-e",34,44,"in"],["arch-a",9,12,"in"],["arch-b",12,18,"in"],["arch-c",18,24,"in"],["arch-d",24,36,"in"],["arch-e",36,48,"in"],["arch-e1",30,42,"in"],["arch-e2",26,38,"in"],["arch-e3",27,39,"in"]].reduce((function(t,e){var n={units:e[3]||"mm",dimensions:[e[1],e[2]]};return t[e[0]]=n,t[e[0].replace(/-/g," ")]=n,t}),{}),A=["mm","cm","m","pc","pt","in","ft","px"],C={m:{system:"metric",factor:1},cm:{system:"metric",factor:.01},mm:{system:"metric",factor:.001},pt:{system:"imperial",factor:1/72},pc:{system:"imperial",factor:1/6},in:{system:"imperial",factor:1},ft:{system:"imperial",factor:12}};const z={metric:{unit:"m",ratio:1/.0254},imperial:{unit:"in",ratio:.0254}};var D=function(t,e,n,i){if("number"!==typeof t||!isFinite(t))throw new Error("Value must be a finite number");if(!e||!n)throw new Error("Must specify from and to units");var r=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}((i=i||{}).pixelsPerInch,96),o=i.precision,s=!1!==i.roundPixel;if(e=e.toLowerCase(),n=n.toLowerCase(),-1===A.indexOf(e))throw new Error('Invalid from unit "'+e+'", must be one of: '+A.join(", "));if(-1===A.indexOf(n))throw new Error('Invalid from unit "'+n+'", must be one of: '+A.join(", "));if(e===n)return t;var a=1,c=1,h=!1;"px"===e&&(c=1/r,e="in"),"px"===n&&(h=!0,a=r,n="in");var u=C[e],p=C[n],f=t*u.factor*c;u.system!==p.system&&(f*=z[u.system].ratio);var l=f/p.factor*a;return h&&s?l=Math.round(l):"number"===typeof o&&isFinite(o)&&(l=function(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)}(l,o)),l},I=A;function N(t,e,n,i){return void 0===e&&(e="px"),void 0===n&&(n="px"),void 0===i&&(i=72),D(t,e,n,{pixelsPerInch:i,precision:4,roundPixel:!0})}function L(t,e){var n,i,r,o,s,a,c=l(),h=e.dimensions,u=function(t){return!!t.dimensions&&("string"===typeof t.dimensions||!!(Array.isArray(t.dimensions)&&t.dimensions.length>=2))}(e),p=t.exporting,d=!!u&&!1!==e.scaleToFit,m=!(!p&&u)||e.scaleToView;c||(d=m=!1);var y,v,g=e.units,w="number"===typeof e.pixelsPerInch&&isFinite(e.pixelsPerInch)?e.pixelsPerInch:72,b=f(e.bleed,0),x=c?window.devicePixelRatio:1,M=m?x:1;"number"===typeof e.pixelRatio&&isFinite(e.pixelRatio)?(y=e.pixelRatio,v=f(e.exportPixelRatio,y)):u?(y=M,v=f(e.exportPixelRatio,1)):(y=x,v=f(e.exportPixelRatio,y)),"number"===typeof e.maxPixelRatio&&isFinite(e.maxPixelRatio)&&(y=Math.min(e.maxPixelRatio,y)),p&&(y=v);var k,_,T=function(t,e){if(!l())return[300,150];var n=e.parent||window;if(n===window||n===document||n===document.body)return[window.innerWidth,window.innerHeight];var i=n.getBoundingClientRect();return[i.width,i.height]}(0,e),P=T[0],S=T[1];if(u){var E=function(t,e,n){if(void 0===e&&(e="px"),void 0===n&&(n=72),"string"===typeof t){var i=t.toLowerCase();if(!(i in R))throw new Error('The dimension preset "'+t+'" is not supported or could not be found; try using a4, a3, postcard, letter, etc.');var r=R[i];return r.dimensions.map((function(t){return N(t,r.units,e,n)}))}return t}(h,g,w),O=Math.max(E[0],E[1]),F=Math.min(E[0],E[1]);if(e.orientation){var j="landscape"===e.orientation;n=j?O:F,i=j?F:O}else n=E[0],i=E[1];k=n,_=i,n+=2*b,i+=2*b}else k=n=P,_=i=S;var A=n,C=i;if(u&&g&&(A=N(n,g,"px",w),C=N(i,g,"px",w)),r=Math.round(A),o=Math.round(C),d&&!p&&u){var z=n/i,D=P/S,I=f(e.scaleToFitPadding,40),L=Math.round(P-2*I),H=Math.round(S-2*I);(r>L||o>H)&&(D>z?(o=H,r=Math.round(o*z)):(r=L,o=Math.round(r/z)))}return{bleed:b,pixelRatio:y,width:n,height:i,dimensions:[n,i],units:g||"px",scaleX:(s=m?Math.round(y*r):Math.round(y*A))/n,scaleY:(a=m?Math.round(y*o):Math.round(y*C))/i,pixelsPerInch:w,viewportWidth:m?Math.round(r):Math.round(A),viewportHeight:m?Math.round(o):Math.round(C),canvasWidth:s,canvasHeight:a,trimWidth:k,trimHeight:_,styleWidth:r,styleHeight:o}}D.units=I;var H=function(t,e){if("string"!==typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"===typeof document&&!e.canvas)return null;var n=e.canvas||document.createElement("canvas");"number"===typeof e.width&&(n.width=e.width),"number"===typeof e.height&&(n.height=e.height);var i,r=e;try{var o=[t];0===t.indexOf("webgl")&&o.push("experimental-"+t);for(var s=0;s<o.length;s++)if(i=n.getContext(o[s],r))return i}catch(a){i=null}return i||null};function q(t){var e,n;void 0===t&&(t={});var i=!1;if(!1!==t.canvas){if(!(e=t.context)||"string"===typeof e){var r=t.canvas;r||(r=function(){if(!l())throw new Error("It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.");return document.createElement("canvas")}(),i=!0);var s=e||"2d";if("function"!==typeof r.getContext)throw new Error("The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?");if(!(e=H(s,o({},t.attributes,{canvas:r}))))throw new Error("Failed at canvas.getContext('"+s+"') - the browser may not support this context, or a different context may already be in use with this canvas.")}if(n=e.canvas,t.canvas&&n!==t.canvas)throw new Error("The { canvas } and { context } settings must point to the same underlying canvas element");t.pixelated&&(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.oImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,n.style["image-rendering"]="pixelated")}return{canvas:n,context:e,ownsCanvas:i}}var U=function(){var t=this;this._settings={},this._props={},this._sketch=void 0,this._raf=null,this._recordTimeout=null,this._lastRedrawResult=void 0,this._isP5Resizing=!1,this._keyboardShortcuts=function(t){void 0===t&&(t={});var e=function(e){if(t.enabled()){var n=p();83!==e.keyCode||e.altKey||!e.metaKey&&!e.ctrlKey?32===e.keyCode?t.togglePlay(e):n&&!e.altKey&&75===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),t.commit(e)):(e.preventDefault(),t.save(e))}};return{attach:function(){window.addEventListener("keydown",e)},detach:function(){window.removeEventListener("keydown",e)}}}({enabled:function(){return!1!==t.settings.hotkeys},save:function(e){e.shiftKey?t.props.recording?(t.endRecord(),t.run()):t.record():t.props.recording||t.exportFrame()},togglePlay:function(){t.props.playing?t.pause():t.play()},commit:function(e){t.exportFrame({commit:!0})}}),this._animateHandler=function(){return t.animate()},this._resizeHandler=function(){t.resize()&&t.render()}},W={sketch:{configurable:!0},settings:{configurable:!0},props:{configurable:!0}};W.sketch.get=function(){return this._sketch},W.settings.get=function(){return this._settings},W.props.get=function(){return this._props},U.prototype._computePlayhead=function(t,e){return"number"===typeof e&&isFinite(e)?t/e:0},U.prototype._computeFrame=function(t,e,n,i){return isFinite(n)&&n>1?Math.floor(t*(n-1)):Math.floor(i*e)},U.prototype._computeCurrentFrame=function(){return this._computeFrame(this.props.playhead,this.props.time,this.props.totalFrames,this.props.fps)},U.prototype._getSizeProps=function(){var t=this.props;return{width:t.width,height:t.height,pixelRatio:t.pixelRatio,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight,viewportWidth:t.viewportWidth,viewportHeight:t.viewportHeight}},U.prototype.run=function(){if(!this.sketch)throw new Error("should wait until sketch is loaded before trying to play()");return!1!==this.settings.playing&&this.play(),"function"===typeof this.sketch.dispose&&console.warn("In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()"),this.props.started||(this._signalBegin(),this.props.started=!0),this.tick(),this.render(),this},U.prototype._cancelTimeouts=function(){null!=this._raf&&"undefined"!==typeof window&&"function"===typeof window.cancelAnimationFrame&&(window.cancelAnimationFrame(this._raf),this._raf=null),null!=this._recordTimeout&&(clearTimeout(this._recordTimeout),this._recordTimeout=null)},U.prototype.play=function(){var t=this.settings.animate;"animation"in this.settings&&(t=!0,console.warn("[canvas-sketch] { animation } has been renamed to { animate }")),t&&(l()?this.props.playing||(this.props.started||(this._signalBegin(),this.props.started=!0),this.props.playing=!0,this._cancelTimeouts(),this._lastTime=c(),this._raf=window.requestAnimationFrame(this._animateHandler)):console.error("[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported"))},U.prototype.pause=function(){this.props.recording&&this.endRecord(),this.props.playing=!1,this._cancelTimeouts()},U.prototype.togglePlay=function(){this.props.playing?this.pause():this.play()},U.prototype.stop=function(){this.pause(),this.props.frame=0,this.props.playhead=0,this.props.time=0,this.props.deltaTime=0,this.props.started=!1,this.render()},U.prototype.record=function(){var t=this;if(!this.props.recording)if(l()){this.stop(),this.props.playing=!0,this.props.recording=!0;var e=this._createExportOptions({sequence:!0}),n=1/this.props.fps;this._cancelTimeouts();var i,r=function(){return t.props.recording?(t.props.deltaTime=n,t.tick(),t.exportFrame(e).then((function(){t.props.recording&&(t.props.deltaTime=0,t.props.frame++,t.props.frame<t.props.totalFrames?(t.props.time+=n,t.props.playhead=t._computePlayhead(t.props.time,t.props.duration),t._recordTimeout=setTimeout(r,0)):(console.log("Finished recording"),t._signalEnd(),t.endRecord(),t.stop(),t.run()))}))):Promise.resolve()};this.props.started||(this._signalBegin(),this.props.started=!0),this.sketch&&"function"===typeof this.sketch.beginRecord&&this._wrapContextScale((function(e){return t.sketch.beginRecord(e)})),(i=e,void 0===i&&(i={}),T(!0,i)).catch((function(t){console.error(t)})).then((function(e){t._raf=window.requestAnimationFrame(r)}))}else console.error("[canvas-sketch] WARN: Recording from Node.js is not yet supported")},U.prototype._signalBegin=function(){var t=this;this.sketch&&"function"===typeof this.sketch.begin&&this._wrapContextScale((function(e){return t.sketch.begin(e)}))},U.prototype._signalEnd=function(){var t=this;this.sketch&&"function"===typeof this.sketch.end&&this._wrapContextScale((function(e){return t.sketch.end(e)}))},U.prototype.endRecord=function(){var t,e=this,n=this.props.recording;return this._cancelTimeouts(),this.props.recording=!1,this.props.deltaTime=0,this.props.playing=!1,(void 0===t&&(t={}),T(!1,t)).catch((function(t){console.error(t)})).then((function(){n&&e.sketch&&"function"===typeof e.sketch.endRecord&&e._wrapContextScale((function(t){return e.sketch.endRecord(t)}))}))},U.prototype._createExportOptions=function(t){return void 0===t&&(t={}),{sequence:t.sequence,save:t.save,fps:this.props.fps,frame:t.sequence?this.props.frame:void 0,file:this.settings.file,name:this.settings.name,prefix:this.settings.prefix,suffix:this.settings.suffix,encoding:this.settings.encoding,encodingQuality:this.settings.encodingQuality,timeStamp:t.timeStamp||w(new Date,"yyyy.mm.dd-HH.MM.ss"),totalFrames:isFinite(this.props.totalFrames)?Math.max(0,this.props.totalFrames):1e3}},U.prototype.exportFrame=function(t){var e=this;if(void 0===t&&(t={}),!this.sketch)return Promise.all([]);"function"===typeof this.sketch.preExport&&this.sketch.preExport();var n=this._createExportOptions(t),i=p(),r=Promise.resolve();if(i&&t.commit&&"function"===typeof i.commit){var s=o({},n),a=i.commit(s);r=h(a)?a:Promise.resolve(a)}return r.then((function(t){return e._doExportFrame(o({},n,{hash:t||""}))})).then((function(t){return 1===t.length?t[0]:t}))},U.prototype._doExportFrame=function(t){var e=this;void 0===t&&(t={}),this._props.exporting=!0,this.resize();var n=this.render(),i=this.props.canvas;return"undefined"===typeof n&&(n=[i]),n=(n=[].concat(n).filter(Boolean)).map((function(e){var n,i="object"===typeof e&&e&&("data"in e||"dataURL"in e),r=i?e.data:e,s=i?o({},e,{data:r}):{data:r};if(u(n=r)&&/canvas/i.test(n.nodeName)&&"function"===typeof n.getContext){var a=function(t,e){void 0===e&&(e={});var n=e.encoding||"image/png";if(!_.includes(n))throw new Error("Invalid canvas encoding "+n);var i=(n.split("/")[1]||"").replace(/jpeg/i,"jpg");return i&&(i=("."+i).toLowerCase()),{extension:i,type:n,dataURL:t.toDataURL(n,e.encodingQuality)}}(r,{encoding:s.encoding||t.encoding,encodingQuality:f(s.encodingQuality,t.encodingQuality,.95)}),c=a.dataURL,h=a.extension,p=a.type;return Object.assign(s,{dataURL:c,extension:h,type:p})}return s})),this._props.exporting=!1,this.resize(),this.render(),Promise.all(n.map((function(e,n,i){var r=o({extension:"",prefix:"",suffix:""},t,e,{layer:n,totalLayers:i.length}),s=!1!==t.save&&e.save;for(var a in r.save=!1!==s,r.filename=E(r),delete r.encoding,delete r.encodingQuality,r)"undefined"===typeof r[a]&&delete r[a];var c=Promise.resolve({});if(r.save){var h=r.data;c=r.dataURL?P(r.dataURL,r):function(t,e){void 0===e&&(e={});var n=Array.isArray(t)?t:[t];return S(new window.Blob(n,{type:e.type||""}),e)}(h,r)}return c.then((function(t){return Object.assign({},r,t)}))}))).then((function(n){var i=n.filter((function(t){return t.save}));if(i.length>0){var r,o=i.find((function(t){return t.outputName})),s=i.some((function(t){return t.client})),a=i.some((function(t){return t.stream}));r=i.length>1?i.length:o?o.outputName+"/"+i[0].filename:""+i[0].filename;var c="";t.sequence?c=isFinite(e.props.totalFrames)?" (frame "+(t.frame+1)+" / "+e.props.totalFrames+")":" (frame "+t.frame+")":i.length>1&&(c=" files");var h=s?"canvas-sketch-cli":"canvas-sketch",u=a?"Streaming into":"Exported";console.log("%c["+h+"]%c "+u+" %c"+r+"%c"+c,"color: #8e8e8e;","color: initial;","font-weight: bold;","font-weight: initial;")}return"function"===typeof e.sketch.postExport&&e.sketch.postExport(),n}))},U.prototype._wrapContextScale=function(t){this._preRender(),t(this.props),this._postRender()},U.prototype._preRender=function(){var t=this.props;this.props.gl||!t.context||t.p5?t.p5&&t.p5.scale(t.scaleX/t.pixelRatio,t.scaleY/t.pixelRatio):(t.context.save(),!1!==this.settings.scaleContext&&t.context.scale(t.scaleX,t.scaleY))},U.prototype._postRender=function(){var t=this.props;this.props.gl||!t.context||t.p5||t.context.restore(),t.gl&&!1!==this.settings.flush&&!t.p5&&t.gl.flush()},U.prototype.tick=function(){this.sketch&&"function"===typeof this.sketch.tick&&(this._preRender(),this.sketch.tick(this.props),this._postRender())},U.prototype.render=function(){return this.props.p5?(this._lastRedrawResult=void 0,this.props.p5.redraw(),this._lastRedrawResult):this.submitDrawCall()},U.prototype.submitDrawCall=function(){if(this.sketch){var t,e=this.props;return this._preRender(),"function"===typeof this.sketch?t=this.sketch(e):"function"===typeof this.sketch.render&&(t=this.sketch.render(e)),this._postRender(),t}},U.prototype.update=function(t){var e=this;void 0===t&&(t={});var n=["animate"];Object.keys(t).forEach((function(t){if(n.indexOf(t)>=0)throw new Error("Sorry, the { "+t+" } option is not yet supported with update().")}));var i=this._settings.canvas,r=this._settings.context;for(var o in t){var s=t[o];"undefined"!==typeof s&&(e._settings[o]=s)}var a=Object.assign({},this._settings,t);if("time"in t&&"frame"in t)throw new Error("You should specify { time } or { frame } but not both");if("time"in t?delete a.frame:"frame"in t&&delete a.time,"duration"in t&&"totalFrames"in t)throw new Error("You should specify { duration } or { totalFrames } but not both");"duration"in t?delete a.totalFrames:"totalFrames"in t&&delete a.duration,"data"in t&&(this._props.data=t.data);var c=this.getTimeProps(a);if(Object.assign(this._props,c),i!==this._settings.canvas||r!==this._settings.context){var h=q(this._settings),u=h.canvas,p=h.context;this.props.canvas=u,this.props.context=p,this._setupGLKey(),this._appendCanvasIfNeeded()}return t.p5&&"function"!==typeof t.p5&&(this.props.p5=t.p5,this.props.p5.draw=function(){e._isP5Resizing||(e._lastRedrawResult=e.submitDrawCall())}),"playing"in t&&(t.playing?this.play():this.pause()),j(this._settings),this.resize(),this.render(),this.props},U.prototype.resize=function(){var t=this._getSizeProps(),e=this.settings,n=this.props,i=L(n,e);Object.assign(this._props,i);var r=this.props,o=r.pixelRatio,s=r.canvasWidth,a=r.canvasHeight,c=r.styleWidth,h=r.styleHeight,u=this.props.canvas;u&&!1!==e.resizeCanvas&&(n.p5?u.width===s&&u.height===a||(this._isP5Resizing=!0,n.p5.pixelDensity(o),n.p5.resizeCanvas(s/o,a/o,!1),this._isP5Resizing=!1):(u.width!==s&&(u.width=s),u.height!==a&&(u.height=a)),l()&&!1!==e.styleCanvas&&(u.style.width=c+"px",u.style.height=h+"px"));var p=this._getSizeProps(),f=!g(t,p);return f&&this._sizeChanged(),f},U.prototype._sizeChanged=function(){this.sketch&&"function"===typeof this.sketch.resize&&this.sketch.resize(this.props)},U.prototype.animate=function(){if(this.props.playing)if(l()){this._raf=window.requestAnimationFrame(this._animateHandler);var t=c(),e=1e3/this.props.fps,n=t-this._lastTime,i=this.props.duration,r="number"===typeof i&&isFinite(i),o=!0,s=this.settings.playbackRate;"fixed"===s?n=e:"throttle"===s?n>e?(t-=n%e,this._lastTime=t):o=!1:this._lastTime=t;var a=n/1e3,h=this.props.time+a*this.props.timeScale;h<0&&r&&(h=i+h);var u=!1,p=!1,f=!1!==this.settings.loop;if(r&&h>=i&&(f?(o=!0,h%=i,p=!0):(o=!1,h=i,u=!0),this._signalEnd()),o){this.props.deltaTime=a,this.props.time=h,this.props.playhead=this._computePlayhead(h,i);var d=this.props.frame;this.props.frame=this._computeCurrentFrame(),p&&this._signalBegin(),d!==this.props.frame&&this.tick(),this.render(),this.props.deltaTime=0}u&&this.pause()}else console.error("[canvas-sketch] WARN: Animation in Node.js is not yet supported")},U.prototype.dispatch=function(t){if("function"!==typeof t)throw new Error("must pass function into dispatch()");t(this.props),this.render()},U.prototype.mount=function(){this._appendCanvasIfNeeded()},U.prototype.unmount=function(){l()&&(window.removeEventListener("resize",this._resizeHandler),this._keyboardShortcuts.detach()),this.props.canvas.parentElement&&this.props.canvas.parentElement.removeChild(this.props.canvas)},U.prototype._appendCanvasIfNeeded=function(){l()&&!1!==this.settings.parent&&this.props.canvas&&!this.props.canvas.parentElement&&(this.settings.parent||document.body).appendChild(this.props.canvas)},U.prototype._setupGLKey=function(){var t;this.props.context&&("function"===typeof(t=this.props.context).clear&&"function"===typeof t.clearColor&&"function"===typeof t.bufferData?this._props.gl=this.props.context:delete this._props.gl)},U.prototype.getTimeProps=function(t){void 0===t&&(t={});var e=t.duration,n=t.totalFrames,i=f(t.timeScale,1),r=f(t.fps,24),o="number"===typeof e&&isFinite(e),s="number"===typeof n&&isFinite(n),a=o?Math.floor(r*e):void 0,c=s?n/r:void 0;if(o&&s&&a!==n)throw new Error("You should specify either duration or totalFrames, but not both. Or, they must match exactly.");"undefined"===typeof t.dimensions&&"undefined"!==typeof t.units&&console.warn("You've specified a { units } setting but no { dimension }, so the units will be ignored."),n=f(n,a,1/0),e=f(e,c,1/0);var h=t.time,u=t.frame,p="number"===typeof h&&isFinite(h),l="number"===typeof u&&isFinite(u),d=0,m=0,y=0;if(p&&l)throw new Error("You should specify either start frame or time, but not both.");return p?(d=h,y=this._computePlayhead(d,e),m=this._computeFrame(y,d,n,r)):l&&(d=(m=u)/r,y=this._computePlayhead(d,e)),{playhead:y,time:d,frame:m,duration:e,totalFrames:n,fps:r,timeScale:i}},U.prototype.setup=function(t){var e=this;if(void 0===t&&(t={}),this.sketch)throw new Error("Multiple setup() calls not yet supported.");this._settings=Object.assign({},t,this._settings),j(this._settings);var n=q(this._settings),i=n.context,r=n.canvas,o=this.getTimeProps(this._settings);this._props=Object.assign({},o,{canvas:r,context:i,deltaTime:0,started:!1,exporting:!1,playing:!1,recording:!1,settings:this.settings,data:this.settings.data,render:function(){return e.render()},togglePlay:function(){return e.togglePlay()},dispatch:function(t){return e.dispatch(t)},tick:function(){return e.tick()},resize:function(){return e.resize()},update:function(t){return e.update(t)},exportFrame:function(t){return e.exportFrame(t)},record:function(){return e.record()},play:function(){return e.play()},pause:function(){return e.pause()},stop:function(){return e.stop()}}),this._setupGLKey(),this.resize()},U.prototype.loadAndRun=function(t,e){var n=this;return this.load(t,e).then((function(){return n.run(),n}))},U.prototype.unload=function(){var t=this;this.pause(),this.sketch&&("function"===typeof this.sketch.unload&&this._wrapContextScale((function(e){return t.sketch.unload(e)})),this._sketch=null)},U.prototype.destroy=function(){this.unload(),this.unmount()},U.prototype.load=function(t,e){var n=this;if("function"!==typeof t)throw new Error("The function must take in a function as the first parameter. Example:\n  canvasSketcher(() => { ... }, settings)");this.sketch&&this.unload(),"undefined"!==typeof e&&this.update(e),this._preRender();var i=Promise.resolve();if(this.settings.p5){if(!l())throw new Error("[canvas-sketch] ERROR: Using p5.js in Node.js is not supported");i=new Promise((function(t){var e,i=n.settings.p5;i.p5&&(e=i.preload,i=i.p5);var r=function(i){e&&(i.preload=function(){return e(i)}),i.setup=function(){var e=n.props,r="webgl"===n.settings.context,o=r?i.WEBGL:i.P2D;i.noLoop(),i.pixelDensity(e.pixelRatio),i.createCanvas(e.viewportWidth,e.viewportHeight,o),r&&n.settings.attributes&&i.setAttributes(n.settings.attributes),n.update({p5:i,canvas:i.canvas,context:i._renderer.drawingContext}),t()}};if("function"===typeof i)new i(r);else{if("function"!==typeof window.createCanvas)throw new Error("{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\nnew p5(); // <-- attaches to global scope");r(window)}}))}return i.then((function(){var e=t(n.props);return h(e)||(e=Promise.resolve(e)),e})).then((function(t){return t||(t={}),n._sketch=t,l()&&(n._keyboardShortcuts.attach(),window.addEventListener("resize",n._resizeHandler)),n._postRender(),n._sizeChanged(),n})).catch((function(t){throw console.warn("Could not start sketch, the async loading function rejected with an error:\n    Error: "+t.message),t}))},Object.defineProperties(U.prototype,W);var K="hot-id-cache",Y=[];function B(t,e){if(void 0===e&&(e={}),e.p5){if(e.canvas||e.context&&"string"!==typeof e.context)throw new Error('In { p5 } mode, you can\'t pass your own canvas or context, unless the context is a "webgl" or "2d" string');var n="string"===typeof e.context&&e.context;e=Object.assign({},e,{canvas:!1,context:n})}var i,r=function(){var t=p();return t&&t.hot}();r&&(i=f(e.id,"$__DEFAULT_CANVAS_SKETCH_ID__$"));var o=r&&"string"===typeof i;o&&Y.includes(i)&&(console.warn("Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. ",i),o=!1);var s=Promise.resolve();if(o){Y.push(i);var a=function(t){var e=p();if(e)return e[K]=e[K]||{},e[K][t]}(i);if(a){var c=function(){var t,n=(t=a.manager,e.animate?{time:t.props.time}:void 0);return a.manager.destroy(),n};s=a.load.then(c).catch(c)}}return s.then((function(n){var r,s=new U;return t?(e=Object.assign({},e,n),s.setup(e),s.mount(),r=s.loadAndRun(t)):r=Promise.resolve(s),o&&function(t,e){var n=p();n&&(n[K]=n[K]||{},n[K][t]=e)}(i,{load:r,manager:s}),r}))}return B.canvasSketch=B,B.PaperSizes=R,B},t.exports=n()}).call(this,n(4))},function(t,e,n){"use strict";(function(e){var n=[],i="undefined"===typeof e?window:e,r=Math.pow(256,6),o=Math.pow(2,52),s=2*o,a=Math.random;function c(t){var e,n=t.length,i=this,r=0,o=i.i=i.j=0,s=i.S=[];for(n||(t=[n++]);r<256;)s[r]=r++;for(r=0;r<256;r++)s[r]=s[o=255&o+t[r%n]+(e=s[r])],s[o]=e;(i.g=function(t){for(var e,n=0,r=i.i,o=i.j,s=i.S;t--;)e=s[r=255&r+1],n=256*n+s[255&(s[r]=s[o=255&o+e])+(s[o]=e)];return i.i=r,i.j=o,n})(256)}function h(t,e){var n,i=[],r=(typeof t)[0];if(e&&"o"==r)for(n in t)try{i.push(h(t[n],e-1))}catch(o){}return i.length?i:"s"==r?t:t+"\0"}function u(t,e){for(var n,i=t+"",r=0;r<i.length;)e[255&r]=255&(n^=19*e[255&r])+i.charCodeAt(r++);return f(e)}function p(t){try{return i.crypto.getRandomValues(t=new Uint8Array(256)),f(t)}catch(e){return[+new Date,i,i.navigator&&i.navigator.plugins,i.screen,f(n)]}}function f(t){return String.fromCharCode.apply(0,t)}t.exports=function(e,i){if(i&&!0===i.global)return i.global=!1,Math.random=t.exports(e,i),i.global=!0,Math.random;var a=i&&i.entropy||!1,l=[],d=(u(h(a?[e,f(n)]:0 in arguments?e:p(),3),l),new c(l));return u(f(d.S),n),function(){for(var t=d.g(6),e=r,n=0;t<o;)t=256*(t+n),e*=256,n=d.g(1);for(;t>=s;)t/=2,e/=2,n>>>=1;return(t+n)/e}},t.exports.resetGlobal=function(){Math.random=a},u(Math.random(),n)}).call(this,n(4))},function(t,e,n){var i;!function(){"use strict";var r=.5*(Math.sqrt(3)-1),o=(3-Math.sqrt(3))/6,s=1/6,a=(Math.sqrt(5)-1)/4,c=(5-Math.sqrt(5))/20;function h(t){var e;e="function"==typeof t?t:t?function(){var t=0,e=0,n=0,i=1,r=p();t=r(" "),e=r(" "),n=r(" ");for(var o=0;o<arguments.length;o++)(t-=r(arguments[o]))<0&&(t+=1),(e-=r(arguments[o]))<0&&(e+=1),(n-=r(arguments[o]))<0&&(n+=1);return r=null,function(){var r=2091639*t+2.3283064365386963e-10*i;return t=e,e=n,n=r-(i=0|r)}}(t):Math.random,this.p=u(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}function u(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var i=e+~~(t()*(256-e)),r=n[e];n[e]=n[i],n[i]=r}return n}function p(){var t=4022871197;return function(e){e=e.toString();for(var n=0;n<e.length;n++){var i=.02519603282416938*(t+=e.charCodeAt(n));i-=t=i>>>0,t=(i*=t)>>>0,t+=4294967296*(i-=t)}return 2.3283064365386963e-10*(t>>>0)}}h.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var n,i,s=this.permMod12,a=this.perm,c=this.grad3,h=0,u=0,p=0,f=(t+e)*r,l=Math.floor(t+f),d=Math.floor(e+f),m=(l+d)*o,y=t-(l-m),v=e-(d-m);y>v?(n=1,i=0):(n=0,i=1);var g=y-n+o,w=v-i+o,b=y-1+2*o,x=v-1+2*o,M=255&l,k=255&d,_=.5-y*y-v*v;if(_>=0){var T=3*s[M+a[k]];h=(_*=_)*_*(c[T]*y+c[T+1]*v)}var P=.5-g*g-w*w;if(P>=0){var S=3*s[M+n+a[k+i]];u=(P*=P)*P*(c[S]*g+c[S+1]*w)}var E=.5-b*b-x*x;if(E>=0){var O=3*s[M+1+a[k+1]];p=(E*=E)*E*(c[O]*b+c[O+1]*x)}return 70*(h+u+p)},noise3D:function(t,e,n){var i,r,o,a,c,h,u,p,f,l,d=this.permMod12,m=this.perm,y=this.grad3,v=(t+e+n)*(1/3),g=Math.floor(t+v),w=Math.floor(e+v),b=Math.floor(n+v),x=(g+w+b)*s,M=t-(g-x),k=e-(w-x),_=n-(b-x);M>=k?k>=_?(c=1,h=0,u=0,p=1,f=1,l=0):M>=_?(c=1,h=0,u=0,p=1,f=0,l=1):(c=0,h=0,u=1,p=1,f=0,l=1):k<_?(c=0,h=0,u=1,p=0,f=1,l=1):M<_?(c=0,h=1,u=0,p=0,f=1,l=1):(c=0,h=1,u=0,p=1,f=1,l=0);var T=M-c+s,P=k-h+s,S=_-u+s,E=M-p+2*s,O=k-f+2*s,F=_-l+2*s,j=M-1+.5,R=k-1+.5,A=_-1+.5,C=255&g,z=255&w,D=255&b,I=.6-M*M-k*k-_*_;if(I<0)i=0;else{var N=3*d[C+m[z+m[D]]];i=(I*=I)*I*(y[N]*M+y[N+1]*k+y[N+2]*_)}var L=.6-T*T-P*P-S*S;if(L<0)r=0;else{var H=3*d[C+c+m[z+h+m[D+u]]];r=(L*=L)*L*(y[H]*T+y[H+1]*P+y[H+2]*S)}var q=.6-E*E-O*O-F*F;if(q<0)o=0;else{var U=3*d[C+p+m[z+f+m[D+l]]];o=(q*=q)*q*(y[U]*E+y[U+1]*O+y[U+2]*F)}var W=.6-j*j-R*R-A*A;if(W<0)a=0;else{var K=3*d[C+1+m[z+1+m[D+1]]];a=(W*=W)*W*(y[K]*j+y[K+1]*R+y[K+2]*A)}return 32*(i+r+o+a)},noise4D:function(t,e,n,i){var r,o,s,h,u,p,f,l,d,m,y,v,g,w,b,x,M,k=this.perm,_=this.grad4,T=(t+e+n+i)*a,P=Math.floor(t+T),S=Math.floor(e+T),E=Math.floor(n+T),O=Math.floor(i+T),F=(P+S+E+O)*c,j=t-(P-F),R=e-(S-F),A=n-(E-F),C=i-(O-F),z=0,D=0,I=0,N=0;j>R?z++:D++,j>A?z++:I++,j>C?z++:N++,R>A?D++:I++,R>C?D++:N++,A>C?I++:N++;var L=j-(p=z>=3?1:0)+c,H=R-(f=D>=3?1:0)+c,q=A-(l=I>=3?1:0)+c,U=C-(d=N>=3?1:0)+c,W=j-(m=z>=2?1:0)+2*c,K=R-(y=D>=2?1:0)+2*c,Y=A-(v=I>=2?1:0)+2*c,B=C-(g=N>=2?1:0)+2*c,G=j-(w=z>=1?1:0)+3*c,X=R-(b=D>=1?1:0)+3*c,Q=A-(x=I>=1?1:0)+3*c,Z=C-(M=N>=1?1:0)+3*c,J=j-1+4*c,V=R-1+4*c,$=A-1+4*c,tt=C-1+4*c,et=255&P,nt=255&S,it=255&E,rt=255&O,ot=.6-j*j-R*R-A*A-C*C;if(ot<0)r=0;else{var st=k[et+k[nt+k[it+k[rt]]]]%32*4;r=(ot*=ot)*ot*(_[st]*j+_[st+1]*R+_[st+2]*A+_[st+3]*C)}var at=.6-L*L-H*H-q*q-U*U;if(at<0)o=0;else{var ct=k[et+p+k[nt+f+k[it+l+k[rt+d]]]]%32*4;o=(at*=at)*at*(_[ct]*L+_[ct+1]*H+_[ct+2]*q+_[ct+3]*U)}var ht=.6-W*W-K*K-Y*Y-B*B;if(ht<0)s=0;else{var ut=k[et+m+k[nt+y+k[it+v+k[rt+g]]]]%32*4;s=(ht*=ht)*ht*(_[ut]*W+_[ut+1]*K+_[ut+2]*Y+_[ut+3]*B)}var pt=.6-G*G-X*X-Q*Q-Z*Z;if(pt<0)h=0;else{var ft=k[et+w+k[nt+b+k[it+x+k[rt+M]]]]%32*4;h=(pt*=pt)*pt*(_[ft]*G+_[ft+1]*X+_[ft+2]*Q+_[ft+3]*Z)}var lt=.6-J*J-V*V-$*$-tt*tt;if(lt<0)u=0;else{var dt=k[et+1+k[nt+1+k[it+1+k[rt+1]]]]%32*4;u=(lt*=lt)*lt*(_[dt]*J+_[dt+1]*V+_[dt+2]*$+_[dt+3]*tt)}return 27*(r+o+s+h+u)}},h._buildPermutationTable=u,void 0===(i=function(){return h}.call(e,n,e,t))||(t.exports=i),e.SimplexNoise=h,t.exports=h}()},function(t,e){t.exports=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(c){r=!0,o=c}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,n){"use strict";n.r(e);var i=n(5),r=n.n(i),o=n(0),s=n.n(o),a=n(1),c=n.n(a),h=n(2),u=n.n(h),p=function(t){function e(){c()(this,e),this.items=[]}return u()(e,[{key:"add",value:function(t){this.items.push(t)}},{key:"append",value:function(){this.add.apply(this,arguments)}},{key:"remove",value:function(t){this.items=this.items.filter((function(e){return e!==t}))}},{key:"delete",value:function(){this.remove.apply(this,arguments)}},{key:"clean",value:function(){this.items=[]}},{key:"size",get:function(){return this.items.length}},{key:t,value:function(){return this.items.values()}}]),e}(Symbol.iterator),f=n(3),l=n.n(f),d=new(window.AudioContext||window.webkitAudioContext);function m(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=d.createOscillator(),o=d.createGain();r.connect(o),r.type=e,o.connect(d.destination),r.frequency.value=t,r.start(),o.gain.value=i,o.gain.exponentialRampToValueAtTime(1e-5,d.currentTime+n),setTimeout((function(){r.stop(),r.disconnect()}),1e3*(n+.5))}var y=function(){function t(e){c()(this,t);for(var n=0,i=Object.entries(e);n<i.length;n++){var r=l()(i[n],2),o=r[0],a=r[1];this[o]=a}this.color=s.a.pick(["#4b86b4","#adcbe3","#63ace5"]),this.size=this.baseOptions.fieldSize/100,this.speed=this.baseOptions.fieldSize/100*this.initSpeedFactor}return u()(t,[{key:"update",value:function(){var t=this,e=this.moveAngle,n=this.game.enemies;this.bX=this.x,this.bY=this.y,this.speed+=-.1,this.speed<=0?(this.draw(!0),this.destroy()):(this.x+=Math.cos(e)*this.speed,this.y+=Math.sin(e)*this.speed),(this.x<-100||this.x>this.baseOptions.width+100||this.y<-100||this.y>this.baseOptions.height+100)&&this.destroy(),n.items.forEach((function(e){e.live&&(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))<e.size&&(e.explode(),t.destroy()))}))}},{key:"draw",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.baseOptions,i=n.context,r=n.backgroundContext,o=this.x,s=this.y;(t=e?r:i).lineWidth=this.size/10;var a=Math.min(this.size*Math.max(this.speed,1),5*this.size);t.beginPath(),t.moveTo(this.x,this.y),t.lineTo(this.x+Math.cos(this.moveAngle-Math.PI)*a,this.y+Math.sin(this.moveAngle-Math.PI)*a),t.stroke(),t.fillStyle=this.color,t.beginPath(),t.arc(o,s,this.size/2,0,2*Math.PI),t.fill(),t.stroke()}},{key:"destroy",value:function(){this.game.bullets.remove(this)}}]),t}(),v=function(){function t(e){c()(this,t);for(var n=0,i=Object.entries(e);n<i.length;n++){var r=l()(i[n],2),o=r[0],s=r[1];this[o]=s}this.deadTime=0,this.size=this.baseOptions.fieldSize/50,document.addEventListener("keydown",this.handleKeyPress.bind(this)),document.addEventListener("keyup",this.handleKeyUp.bind(this)),this.baseOptions.canvas.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.baseOptions.canvas.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.cursorX=0,this.cursorY=0,this.moveDirection={up:!1,right:!1,down:!1,left:!1},this.gunAngle=Math.PI}return u()(t,[{key:"fire",value:function(){if(!this.game.running)return this.game.ship.deadTime=this.game.time,this.game.running=!0,void m(s.a.pick([100]),"sine",1,.5);if(!this.dead){var t=this.baseOptions,e=this.game;m(s.a.pick([311.1,370,415.3]),"sawtooth",.1,.5),m(s.a.pick([155.6,185,207.7]),"sine",.2,.5);for(var n=0;n<8;n+=1){var i=new y({baseOptions:t,game:e,x:this.gunTipCoord[0],y:this.gunTipCoord[1],moveAngle:this.gunAngle+s.a.range(-Math.PI/32,Math.PI/32),initSpeedFactor:s.a.range(.8,1.2)});e.bullets.add(i)}}}},{key:"explode",value:function(){m(87.31,"triangle",.1);var t=this.x,e=this.y,n=this.baseOptions,i=this.game;this.dead=!0,this.deadTime=i.time;for(var r=-Math.PI;r<Math.PI;r+=Math.PI/50){var o=new y({baseOptions:n,game:i,x:t,y:e,moveAngle:r,initSpeedFactor:s.a.range(.8,1.2)});i.bullets.add(o)}}},{key:"handleMouseDown",value:function(t){this.fire()}},{key:"handleMouseMove",value:function(t){var e=t.movementX,n=t.movementY;this.cursorX+=e,this.cursorY+=n,this.gunAngle=Math.atan2(this.cursorY,this.cursorX),this.cursorX=200*Math.cos(this.gunAngle),this.cursorY=200*Math.sin(this.gunAngle)}},{key:"handleKeyPress",value:function(t){switch(t.code){case"ArrowUp":case"KeyW":this.moveDirection.up=!0;break;case"ArrowRight":case"KeyD":this.moveDirection.right=!0;break;case"ArrowDown":case"KeyS":this.moveDirection.down=!0;break;case"ArrowLeft":case"KeyA":this.moveDirection.left=!0}}},{key:"handleKeyUp",value:function(t){switch(t.code){case"ArrowUp":case"KeyW":this.moveDirection.up=!1;break;case"ArrowRight":case"KeyD":this.moveDirection.right=!1;break;case"ArrowDown":case"KeyS":this.moveDirection.down=!1;break;case"ArrowLeft":case"KeyA":this.moveDirection.left=!1}}},{key:"update",value:function(){if(this.dead)this.game.time-this.deadTime>1&&(this.dead=!1);else{var t=this.baseOptions.fieldSize/300;this.moveDirection.up&&(this.y+=-t),this.moveDirection.right&&(this.x+=t),this.moveDirection.down&&(this.y+=t),this.moveDirection.left&&(this.x-=t),this.x=Math.max(Math.min(this.baseOptions.width,this.x),0),this.y=Math.max(Math.min(this.baseOptions.height,this.y),0)}}},{key:"draw",value:function(){var t=this.baseOptions.context,e=this.x,n=this.y,i=this.gunAngle;if(!this.dead){t.fillStyle="#96ceb4",t.lineWidth=this.size/10,t.beginPath(),t.arc(e,n,this.size/2,0,2*Math.PI),t.fill(),t.stroke(),t.beginPath();var r=Math.cos(i)*this.size/2,o=Math.sin(i)*this.size/2,s=Math.cos(i)*this.size*1.5,a=Math.sin(i)*this.size*1.5;this.gunTipCoord=[e+s,n+a],t.moveTo(e+r,n+o),t.lineTo(e+s,n+a),t.stroke()}}}]),t}(),g=function(){function t(e){c()(this,t);for(var n=0,i=Object.entries(e);n<i.length;n++){var r=l()(i[n],2),o=r[0],a=r[1];this[o]=a}this.live=!0,this.sizeFactor=s.a.range(20,30),this.size=this.baseOptions.fieldSize*(1/this.sizeFactor),this.particleSize=this.baseOptions.fieldSize/100,this.speed=this.baseOptions.fieldSize/(10*this.sizeFactor),this.moveAngle=Math.PI/2}return u()(t,[{key:"update",value:function(){var t=this.game.ship;if(this.live){this.moveAngle=Math.atan2(t.y-this.y,t.x-this.x),this.x+=Math.cos(this.moveAngle)*this.speed,this.y+=Math.sin(this.moveAngle)*this.speed,Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))<this.size/2+t.size/2&&(t.explode(),this.destroy())}else{var e=0;this.particles.forEach((function(t){return t.x+=Math.cos(t.a)*t.speed,t.y+=Math.sin(t.a)*t.speed,t.speed=Math.max(t.speed-(1-1/t.speed),1),e=Math.max(e,t.speed),t})),e<=1&&(this.draw(!0),this.destroy())}}},{key:"draw",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.baseOptions,i=n.context,r=n.backgroundContext,o=this.x,s=this.y;t=e?r:i,this.live?(t.fillStyle="#ff6f69",t.lineWidth=this.size/30,t.beginPath(),t.arc(o,s,this.size/2,0,2*Math.PI),t.fill(),t.stroke(),r.fillStyle="hsla(0,0%,98%,0.1)",r.beginPath(),r.arc(o,s,this.size/2,0,2*Math.PI),r.fill()):this.particles.forEach((function(e){var n=e.x,i=e.y,r=e.size,o=e.c;t.fillStyle=o,t.beginPath(),t.arc(n,i,r/2,0,2*Math.PI),t.fill()}))}},{key:"explode",value:function(){m(s.a.pick([449.2,492,540]),"sine",.12),this.live=!1,this.particles=[];for(var t=0;t<2*this.sizeFactor;t+=1){var e={x:this.x+s.a.range(-this.size,this.size),y:this.y+s.a.range(-this.size,this.size),speed:s.a.range(5,10),size:this.particleSize*s.a.range(.5,1.5),c:"hsl(0, 100%,".concat(s.a.range(40,60),"%)")};e.a=Math.atan2(e.y-this.y,e.x-this.x),this.particles.push(e)}}},{key:"destroy",value:function(){this.game.enemies.remove(this)}}]),t}(),w={canvas:document.querySelector("#canvas"),dimensions:[1201,1201],animate:!0};r()((function(t){var e=t.canvas,n=t.context,i=t.width,r=t.height;!function(t){t.addEventListener("click",(function(){t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock()}))}(e);var o=document.createElement("canvas");o.width=i,o.height=r;var a=o.getContext("2d");a.fillStyle="hsl(0, 0%, 98%)",a.fillRect(0,0,i,r);var c=document.createElement("canvas");c.width=i,c.height=r;var h=c.getContext("2d");h.lineWidth=.05,h.strokeStyle="hsla(0, 0%, 50%)";for(var u=.5;u<r;u+=50)h.beginPath(),h.moveTo(0,u),h.lineTo(i,u),h.stroke();for(var f=.5;f<i;f+=50)h.beginPath(),h.moveTo(f,0),h.lineTo(f,r),h.stroke();var l=Math.min(i,r),d={running:!1},m={context:n,canvas:e,fieldSize:l,width:i,height:r,backgroundContext:a,backGroundCanvas:o};d.bullets=new p,d.enemies=new p,d.ship=new v({baseOptions:m,game:d,x:i/2,y:r/2});return function(t){var e=t.context,n=t.time;d.time=n,a.drawImage(c,0,0),a.fillStyle="hsla(0, 0%, 98%, 0.01)",a.fillRect(0,0,i,r),e.drawImage(o,0,0),d.running?(d.enemies.size<Math.min(Math.floor((n-d.ship.deadTime)/3)+1,15)&&function(){var t=0,e=0;switch(s.a.pick(["top","left","bottom","right"])){case"top":e=-100,t=s.a.range(-100,i+100);break;case"right":t=i+100,e=s.a.range(-100,i+100);break;case"bottom":e=r+100,t=s.a.range(-100,i+100);break;case"left":t=-100,e=s.a.range(-100,i+100)}d.enemies.add(new g({baseOptions:m,game:d,x:t,y:e}))}(),d.enemies.items.forEach((function(t){t.update(),t.draw()})),d.bullets.items.forEach((function(t){t.update(),t.draw()})),d.ship.update(),d.ship.draw()):(e.save(),e.translate(i/2,r/2),e.rotate(Math.cos(5*n)/5),e.font="bold 90px Arial",e.textAlign="center",e.fillStyle="hsl(0, 0%, 20%)",e.fillText("Click to start",0,0),e.restore())}}),w)}]);