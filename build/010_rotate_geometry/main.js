!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}({0:function(t,e,n){(function(e){var n;n=function(){var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var o=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,o){for(var a,s,u=i(e),c=1;c<arguments.length;c++){for(var f in a=Object(arguments[c]))n.call(a,f)&&(u[f]=a[f]);if(t){s=t(a);for(var h=0;h<s.length;h++)r.call(a,s[h])&&(u[s[h]]=a[s[h]])}}return u},a="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};function s(t,e){return t(e={exports:{}},e.exports),e.exports}var u=a.performance&&a.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date},c=function(t){return!!t&&("object"===typeof t||"function"===typeof t)&&"function"===typeof t.then},f=function(t){return!(!t||"object"!==typeof t)&&("object"===typeof window&&"object"===typeof window.Node?t instanceof window.Node:"number"===typeof t.nodeType&&"string"===typeof t.nodeName)};function h(){return"undefined"!==typeof window&&window["canvas-sketch-cli"]}function p(){for(var t=arguments,e=0;e<arguments.length;e++)if(null!=t[e])return t[e]}function d(){return"undefined"!==typeof document}var l,m,y=s((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"===typeof Object.keys?Object.keys:n).shim=n})),v=(y.shim,s((function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i}))),g=(v.supported,v.unsupported,s((function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,u;if(r(t)||r(o))return!1;if(t.prototype!==o.prototype)return!1;if(v(t))return!!v(o)&&(t=e.call(t),o=e.call(o),n(t,o,a));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var c=y(t),f=y(o)}catch(h){return!1}if(c.length!=f.length)return!1;for(c.sort(),f.sort(),s=c.length-1;s>=0;s--)if(c[s]!=f[s])return!1;for(s=c.length-1;s>=0;s--)if(u=c[s],!n(t[u],o[u],a))return!1;return typeof t===typeof o}(t,o,a))};function r(t){return null===t||void 0===t}function i(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&"function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0])}}))),b=s((function(t,e){!function(e){var n=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,s=/[^-+\dA-Z]/g;return function(u,c,f,h){if(1!==arguments.length||"string"!==a(u)||/\d/.test(u)||(c=u,u=void 0),(u=u||new Date)instanceof Date||(u=new Date(u)),isNaN(u))throw TypeError("Invalid date");var p=(c=String(n.masks[c]||c||n.masks.default)).slice(0,4);"UTC:"!==p&&"GMT:"!==p||(c=c.slice(4),f=!0,"GMT:"===p&&(h=!0));var d=f?"getUTC":"get",l=u[d+"Date"](),m=u[d+"Day"](),y=u[d+"Month"](),v=u[d+"FullYear"](),g=u[d+"Hours"](),b=u[d+"Minutes"](),M=u[d+"Seconds"](),w=u[d+"Milliseconds"](),x=f?0:u.getTimezoneOffset(),_=i(u),k=o(u),T={d:l,dd:r(l),ddd:n.i18n.dayNames[m],dddd:n.i18n.dayNames[m+7],m:y+1,mm:r(y+1),mmm:n.i18n.monthNames[y],mmmm:n.i18n.monthNames[y+12],yy:String(v).slice(2),yyyy:v,h:g%12||12,hh:r(g%12||12),H:g,HH:r(g),M:b,MM:r(b),s:M,ss:r(M),l:r(w,3),L:r(Math.round(w/10)),t:g<12?n.i18n.timeNames[0]:n.i18n.timeNames[1],tt:g<12?n.i18n.timeNames[2]:n.i18n.timeNames[3],T:g<12?n.i18n.timeNames[4]:n.i18n.timeNames[5],TT:g<12?n.i18n.timeNames[6]:n.i18n.timeNames[7],Z:h?"GMT":f?"UTC":(String(u).match(e)||[""]).pop().replace(s,""),o:(x>0?"-":"+")+r(100*Math.floor(Math.abs(x)/60)+Math.abs(x)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10],W:_,N:k};return c.replace(t,(function(t){return t in T?T[t]:t.slice(1,t.length-1)}))}}();function r(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}function i(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=e.getTimezoneOffset()-n.getTimezoneOffset();e.setHours(e.getHours()-r);var i=(e-n)/6048e5;return 1+Math.floor(i)}function o(t){var e=t.getDay();return 0===e&&(e=7),e}function a(t){return null===t?"null":void 0===t?"undefined":"object"!==typeof t?typeof t:Array.isArray(t)?"array":{}.toString.call(t).slice(8,-1).toLowerCase()}n.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},n.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},t.exports=n}()})),M="",w=function(t,e){if("string"!==typeof t)throw new TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var n=t.length*e;if(l!==t||"undefined"===typeof l)l=t,M="";else if(M.length>=n)return M.substr(0,n);for(;n>M.length&&e>1;)1&e&&(M+=t),e>>=1,t+=t;return M=(M+=t).substr(0,n)},x=function(){},_={extension:"",prefix:"",suffix:""},k=["image/png","image/jpeg","image/webp"];function T(t,e){return void 0===e&&(e={}),new Promise((function(n,r){e=o({},_,e);var i=E(Object.assign({},e,{extension:"",frame:void 0})),a=t?"streamStart":"streamEnd",s=h();return s&&s.output&&"function"===typeof s[a]?s[a](o({},e,{filename:i})).then((function(t){return n(t)})):n({filename:i,client:!1})}))}function P(t,e){return void 0===e&&(e={}),function(t){return new Promise((function(e){var n=t.indexOf(",");if(-1!==n){for(var r=t.slice(n+1),i=window.atob(r),o=t.slice(0,n),a=/data:([^;]+)/.exec(o),s=(a?a[1]:"")||void 0,u=new ArrayBuffer(i.length),c=new Uint8Array(u),f=0;f<i.length;f++)c[f]=i.charCodeAt(f);e(new window.Blob([u],{type:s}))}else e(new window.Blob)}))}(t).then((function(t){return R(t,e)}))}function R(t,e){return void 0===e&&(e={}),new Promise((function(n){var r=(e=o({},_,e)).filename,i=h();if(i&&"function"===typeof i.saveBlob&&i.output)return i.saveBlob(t,o({},e,{filename:r})).then((function(t){return n(t)}));m||((m=document.createElement("a")).style.visibility="hidden",m.target="_blank"),m.download=r,m.href=window.URL.createObjectURL(t),document.body.appendChild(m),m.onclick=function(){m.onclick=x,setTimeout((function(){window.URL.revokeObjectURL(t),m.parentElement&&m.parentElement.removeChild(m),m.removeAttribute("href"),n({filename:r,client:!1})}))},m.click()}))}function E(t){if(void 0===t&&(t={}),"function"===typeof(t=o({},t)).file)return t.file(t);if(t.file)return t.file;var e,n,r,i,a=null,s="";"string"===typeof t.extension&&(s=t.extension),"number"===typeof t.frame&&(e="number"===typeof t.totalFrames?t.totalFrames:Math.max(1e4,t.frame),n=String(t.frame),r=String(e).length,i="0",n=n.toString(),a="undefined"===typeof r?n:(i=0===i?"0":i?i.toString():" ",w(i,r-n.length)+n));var u=isFinite(t.totalLayers)&&isFinite(t.layer)&&t.totalLayers>1?""+t.layer:"";if(null!=a)return[u,a].filter(Boolean).join("-")+s;var c=t.timeStamp;return[t.prefix,t.name||c,u,t.hash,t.suffix].filter(Boolean).join("-")+s}var F={dimension:"dimensions",animated:"animate",animating:"animate",unit:"units",P5:"p5",pixellated:"pixelated",looping:"loop",pixelPerInch:"pixels"},S=["dimensions","units","pixelsPerInch","orientation","scaleToFit","scaleToView","bleed","pixelRatio","exportPixelRatio","maxPixelRatio","scaleContext","resizeCanvas","styleCanvas","canvas","context","attributes","parent","file","name","prefix","suffix","animate","playing","loop","duration","totalFrames","fps","playbackRate","timeScale","frame","time","flush","pixelated","hotkeys","p5","id","scaleToFitPadding","data","params","encoding","encodingQuality"],j=function(t){Object.keys(t).forEach((function(t){if(t in F){var e=F[t];console.warn('[canvas-sketch] Could not recognize the setting "'+t+'", did you mean "'+e+'"?')}else S.includes(t)||console.warn('[canvas-sketch] Could not recognize the setting "'+t+'"')}))},O=[["postcard",101.6,152.4],["poster-small",280,430],["poster",460,610],["poster-large",610,910],["business-card",50.8,88.9],["2r",64,89],["3r",89,127],["4r",102,152],["5r",127,178],["6r",152,203],["8r",203,254],["10r",254,305],["11r",279,356],["12r",305,381],["a0",841,1189],["a1",594,841],["a2",420,594],["a3",297,420],["a4",210,297],["a5",148,210],["a6",105,148],["a7",74,105],["a8",52,74],["a9",37,52],["a10",26,37],["2a0",1189,1682],["4a0",1682,2378],["b0",1e3,1414],["b1",707,1e3],["b1+",720,1020],["b2",500,707],["b2+",520,720],["b3",353,500],["b4",250,353],["b5",176,250],["b6",125,176],["b7",88,125],["b8",62,88],["b9",44,62],["b10",31,44],["b11",22,32],["b12",16,22],["c0",917,1297],["c1",648,917],["c2",458,648],["c3",324,458],["c4",229,324],["c5",162,229],["c6",114,162],["c7",81,114],["c8",57,81],["c9",40,57],["c10",28,40],["c11",22,32],["c12",16,22],["half-letter",5.5,8.5,"in"],["letter",8.5,11,"in"],["legal",8.5,14,"in"],["junior-legal",5,8,"in"],["ledger",11,17,"in"],["tabloid",11,17,"in"],["ansi-a",8.5,11,"in"],["ansi-b",11,17,"in"],["ansi-c",17,22,"in"],["ansi-d",22,34,"in"],["ansi-e",34,44,"in"],["arch-a",9,12,"in"],["arch-b",12,18,"in"],["arch-c",18,24,"in"],["arch-d",24,36,"in"],["arch-e",36,48,"in"],["arch-e1",30,42,"in"],["arch-e2",26,38,"in"],["arch-e3",27,39,"in"]].reduce((function(t,e){var n={units:e[3]||"mm",dimensions:[e[1],e[2]]};return t[e[0]]=n,t[e[0].replace(/-/g," ")]=n,t}),{}),C=["mm","cm","m","pc","pt","in","ft","px"],D={m:{system:"metric",factor:1},cm:{system:"metric",factor:.01},mm:{system:"metric",factor:.001},pt:{system:"imperial",factor:1/72},pc:{system:"imperial",factor:1/6},in:{system:"imperial",factor:1},ft:{system:"imperial",factor:12}};const A={metric:{unit:"m",ratio:1/.0254},imperial:{unit:"in",ratio:.0254}};var N=function(t,e,n,r){if("number"!==typeof t||!isFinite(t))throw new Error("Value must be a finite number");if(!e||!n)throw new Error("Must specify from and to units");var i=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}((r=r||{}).pixelsPerInch,96),o=r.precision,a=!1!==r.roundPixel;if(e=e.toLowerCase(),n=n.toLowerCase(),-1===C.indexOf(e))throw new Error('Invalid from unit "'+e+'", must be one of: '+C.join(", "));if(-1===C.indexOf(n))throw new Error('Invalid from unit "'+n+'", must be one of: '+C.join(", "));if(e===n)return t;var s=1,u=1,c=!1;"px"===e&&(u=1/i,e="in"),"px"===n&&(c=!0,s=i,n="in");var f=D[e],h=D[n],p=t*f.factor*u;f.system!==h.system&&(p*=A[f.system].ratio);var d=p/h.factor*s;return c&&a?d=Math.round(d):"number"===typeof o&&isFinite(o)&&(d=function(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)}(d,o)),d},H=C;function z(t,e,n,r){return void 0===e&&(e="px"),void 0===n&&(n="px"),void 0===r&&(r=72),N(t,e,n,{pixelsPerInch:r,precision:4,roundPixel:!0})}function I(t,e){var n,r,i,o,a,s,u=d(),c=e.dimensions,f=function(t){return!!t.dimensions&&("string"===typeof t.dimensions||!!(Array.isArray(t.dimensions)&&t.dimensions.length>=2))}(e),h=t.exporting,l=!!f&&!1!==e.scaleToFit,m=!(!h&&f)||e.scaleToView;u||(l=m=!1);var y,v,g=e.units,b="number"===typeof e.pixelsPerInch&&isFinite(e.pixelsPerInch)?e.pixelsPerInch:72,M=p(e.bleed,0),w=u?window.devicePixelRatio:1,x=m?w:1;"number"===typeof e.pixelRatio&&isFinite(e.pixelRatio)?(y=e.pixelRatio,v=p(e.exportPixelRatio,y)):f?(y=x,v=p(e.exportPixelRatio,1)):(y=w,v=p(e.exportPixelRatio,y)),"number"===typeof e.maxPixelRatio&&isFinite(e.maxPixelRatio)&&(y=Math.min(e.maxPixelRatio,y)),h&&(y=v);var _,k,T=function(t,e){if(!d())return[300,150];var n=e.parent||window;if(n===window||n===document||n===document.body)return[window.innerWidth,window.innerHeight];var r=n.getBoundingClientRect();return[r.width,r.height]}(0,e),P=T[0],R=T[1];if(f){var E=function(t,e,n){if(void 0===e&&(e="px"),void 0===n&&(n=72),"string"===typeof t){var r=t.toLowerCase();if(!(r in O))throw new Error('The dimension preset "'+t+'" is not supported or could not be found; try using a4, a3, postcard, letter, etc.');var i=O[r];return i.dimensions.map((function(t){return z(t,i.units,e,n)}))}return t}(c,g,b),F=Math.max(E[0],E[1]),S=Math.min(E[0],E[1]);if(e.orientation){var j="landscape"===e.orientation;n=j?F:S,r=j?S:F}else n=E[0],r=E[1];_=n,k=r,n+=2*M,r+=2*M}else _=n=P,k=r=R;var C=n,D=r;if(f&&g&&(C=z(n,g,"px",b),D=z(r,g,"px",b)),i=Math.round(C),o=Math.round(D),l&&!h&&f){var A=n/r,N=P/R,H=p(e.scaleToFitPadding,40),I=Math.round(P-2*H),L=Math.round(R-2*H);(i>I||o>L)&&(N>A?(o=L,i=Math.round(o*A)):(i=I,o=Math.round(i/A)))}return{bleed:M,pixelRatio:y,width:n,height:r,dimensions:[n,r],units:g||"px",scaleX:(a=m?Math.round(y*i):Math.round(y*C))/n,scaleY:(s=m?Math.round(y*o):Math.round(y*D))/r,pixelsPerInch:b,viewportWidth:m?Math.round(i):Math.round(C),viewportHeight:m?Math.round(o):Math.round(D),canvasWidth:a,canvasHeight:s,trimWidth:_,trimHeight:k,styleWidth:i,styleHeight:o}}N.units=H;var L=function(t,e){if("string"!==typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"===typeof document&&!e.canvas)return null;var n=e.canvas||document.createElement("canvas");"number"===typeof e.width&&(n.width=e.width),"number"===typeof e.height&&(n.height=e.height);var r,i=e;try{var o=[t];0===t.indexOf("webgl")&&o.push("experimental-"+t);for(var a=0;a<o.length;a++)if(r=n.getContext(o[a],i))return r}catch(s){r=null}return r||null};function q(t){var e,n;void 0===t&&(t={});var r=!1;if(!1!==t.canvas){if(!(e=t.context)||"string"===typeof e){var i=t.canvas;i||(i=function(){if(!d())throw new Error("It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.");return document.createElement("canvas")}(),r=!0);var a=e||"2d";if("function"!==typeof i.getContext)throw new Error("The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?");if(!(e=L(a,o({},t.attributes,{canvas:i}))))throw new Error("Failed at canvas.getContext('"+a+"') - the browser may not support this context, or a different context may already be in use with this canvas.")}if(n=e.canvas,t.canvas&&n!==t.canvas)throw new Error("The { canvas } and { context } settings must point to the same underlying canvas element");t.pixelated&&(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.oImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,n.style["image-rendering"]="pixelated")}return{canvas:n,context:e,ownsCanvas:r}}var W=function(){var t=this;this._settings={},this._props={},this._sketch=void 0,this._raf=null,this._recordTimeout=null,this._lastRedrawResult=void 0,this._isP5Resizing=!1,this._keyboardShortcuts=function(t){void 0===t&&(t={});var e=function(e){if(t.enabled()){var n=h();83!==e.keyCode||e.altKey||!e.metaKey&&!e.ctrlKey?32===e.keyCode?t.togglePlay(e):n&&!e.altKey&&75===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),t.commit(e)):(e.preventDefault(),t.save(e))}};return{attach:function(){window.addEventListener("keydown",e)},detach:function(){window.removeEventListener("keydown",e)}}}({enabled:function(){return!1!==t.settings.hotkeys},save:function(e){e.shiftKey?t.props.recording?(t.endRecord(),t.run()):t.record():t.props.recording||t.exportFrame()},togglePlay:function(){t.props.playing?t.pause():t.play()},commit:function(e){t.exportFrame({commit:!0})}}),this._animateHandler=function(){return t.animate()},this._resizeHandler=function(){t.resize()&&t.render()}},U={sketch:{configurable:!0},settings:{configurable:!0},props:{configurable:!0}};U.sketch.get=function(){return this._sketch},U.settings.get=function(){return this._settings},U.props.get=function(){return this._props},W.prototype._computePlayhead=function(t,e){return"number"===typeof e&&isFinite(e)?t/e:0},W.prototype._computeFrame=function(t,e,n,r){return isFinite(n)&&n>1?Math.floor(t*(n-1)):Math.floor(r*e)},W.prototype._computeCurrentFrame=function(){return this._computeFrame(this.props.playhead,this.props.time,this.props.totalFrames,this.props.fps)},W.prototype._getSizeProps=function(){var t=this.props;return{width:t.width,height:t.height,pixelRatio:t.pixelRatio,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight,viewportWidth:t.viewportWidth,viewportHeight:t.viewportHeight}},W.prototype.run=function(){if(!this.sketch)throw new Error("should wait until sketch is loaded before trying to play()");return!1!==this.settings.playing&&this.play(),"function"===typeof this.sketch.dispose&&console.warn("In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()"),this.props.started||(this._signalBegin(),this.props.started=!0),this.tick(),this.render(),this},W.prototype._cancelTimeouts=function(){null!=this._raf&&"undefined"!==typeof window&&"function"===typeof window.cancelAnimationFrame&&(window.cancelAnimationFrame(this._raf),this._raf=null),null!=this._recordTimeout&&(clearTimeout(this._recordTimeout),this._recordTimeout=null)},W.prototype.play=function(){var t=this.settings.animate;"animation"in this.settings&&(t=!0,console.warn("[canvas-sketch] { animation } has been renamed to { animate }")),t&&(d()?this.props.playing||(this.props.started||(this._signalBegin(),this.props.started=!0),this.props.playing=!0,this._cancelTimeouts(),this._lastTime=u(),this._raf=window.requestAnimationFrame(this._animateHandler)):console.error("[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported"))},W.prototype.pause=function(){this.props.recording&&this.endRecord(),this.props.playing=!1,this._cancelTimeouts()},W.prototype.togglePlay=function(){this.props.playing?this.pause():this.play()},W.prototype.stop=function(){this.pause(),this.props.frame=0,this.props.playhead=0,this.props.time=0,this.props.deltaTime=0,this.props.started=!1,this.render()},W.prototype.record=function(){var t=this;if(!this.props.recording)if(d()){this.stop(),this.props.playing=!0,this.props.recording=!0;var e=this._createExportOptions({sequence:!0}),n=1/this.props.fps;this._cancelTimeouts();var r,i=function(){return t.props.recording?(t.props.deltaTime=n,t.tick(),t.exportFrame(e).then((function(){t.props.recording&&(t.props.deltaTime=0,t.props.frame++,t.props.frame<t.props.totalFrames?(t.props.time+=n,t.props.playhead=t._computePlayhead(t.props.time,t.props.duration),t._recordTimeout=setTimeout(i,0)):(console.log("Finished recording"),t._signalEnd(),t.endRecord(),t.stop(),t.run()))}))):Promise.resolve()};this.props.started||(this._signalBegin(),this.props.started=!0),this.sketch&&"function"===typeof this.sketch.beginRecord&&this._wrapContextScale((function(e){return t.sketch.beginRecord(e)})),(r=e,void 0===r&&(r={}),T(!0,r)).catch((function(t){console.error(t)})).then((function(e){t._raf=window.requestAnimationFrame(i)}))}else console.error("[canvas-sketch] WARN: Recording from Node.js is not yet supported")},W.prototype._signalBegin=function(){var t=this;this.sketch&&"function"===typeof this.sketch.begin&&this._wrapContextScale((function(e){return t.sketch.begin(e)}))},W.prototype._signalEnd=function(){var t=this;this.sketch&&"function"===typeof this.sketch.end&&this._wrapContextScale((function(e){return t.sketch.end(e)}))},W.prototype.endRecord=function(){var t,e=this,n=this.props.recording;return this._cancelTimeouts(),this.props.recording=!1,this.props.deltaTime=0,this.props.playing=!1,(void 0===t&&(t={}),T(!1,t)).catch((function(t){console.error(t)})).then((function(){n&&e.sketch&&"function"===typeof e.sketch.endRecord&&e._wrapContextScale((function(t){return e.sketch.endRecord(t)}))}))},W.prototype._createExportOptions=function(t){return void 0===t&&(t={}),{sequence:t.sequence,save:t.save,fps:this.props.fps,frame:t.sequence?this.props.frame:void 0,file:this.settings.file,name:this.settings.name,prefix:this.settings.prefix,suffix:this.settings.suffix,encoding:this.settings.encoding,encodingQuality:this.settings.encodingQuality,timeStamp:t.timeStamp||b(new Date,"yyyy.mm.dd-HH.MM.ss"),totalFrames:isFinite(this.props.totalFrames)?Math.max(0,this.props.totalFrames):1e3}},W.prototype.exportFrame=function(t){var e=this;if(void 0===t&&(t={}),!this.sketch)return Promise.all([]);"function"===typeof this.sketch.preExport&&this.sketch.preExport();var n=this._createExportOptions(t),r=h(),i=Promise.resolve();if(r&&t.commit&&"function"===typeof r.commit){var a=o({},n),s=r.commit(a);i=c(s)?s:Promise.resolve(s)}return i.then((function(t){return e._doExportFrame(o({},n,{hash:t||""}))})).then((function(t){return 1===t.length?t[0]:t}))},W.prototype._doExportFrame=function(t){var e=this;void 0===t&&(t={}),this._props.exporting=!0,this.resize();var n=this.render(),r=this.props.canvas;return"undefined"===typeof n&&(n=[r]),n=(n=[].concat(n).filter(Boolean)).map((function(e){var n,r="object"===typeof e&&e&&("data"in e||"dataURL"in e),i=r?e.data:e,a=r?o({},e,{data:i}):{data:i};if(f(n=i)&&/canvas/i.test(n.nodeName)&&"function"===typeof n.getContext){var s=function(t,e){void 0===e&&(e={});var n=e.encoding||"image/png";if(!k.includes(n))throw new Error("Invalid canvas encoding "+n);var r=(n.split("/")[1]||"").replace(/jpeg/i,"jpg");return r&&(r=("."+r).toLowerCase()),{extension:r,type:n,dataURL:t.toDataURL(n,e.encodingQuality)}}(i,{encoding:a.encoding||t.encoding,encodingQuality:p(a.encodingQuality,t.encodingQuality,.95)}),u=s.dataURL,c=s.extension,h=s.type;return Object.assign(a,{dataURL:u,extension:c,type:h})}return a})),this._props.exporting=!1,this.resize(),this.render(),Promise.all(n.map((function(e,n,r){var i=o({extension:"",prefix:"",suffix:""},t,e,{layer:n,totalLayers:r.length}),a=!1!==t.save&&e.save;for(var s in i.save=!1!==a,i.filename=E(i),delete i.encoding,delete i.encodingQuality,i)"undefined"===typeof i[s]&&delete i[s];var u=Promise.resolve({});if(i.save){var c=i.data;u=i.dataURL?P(i.dataURL,i):function(t,e){void 0===e&&(e={});var n=Array.isArray(t)?t:[t];return R(new window.Blob(n,{type:e.type||""}),e)}(c,i)}return u.then((function(t){return Object.assign({},i,t)}))}))).then((function(n){var r=n.filter((function(t){return t.save}));if(r.length>0){var i,o=r.find((function(t){return t.outputName})),a=r.some((function(t){return t.client})),s=r.some((function(t){return t.stream}));i=r.length>1?r.length:o?o.outputName+"/"+r[0].filename:""+r[0].filename;var u="";t.sequence?u=isFinite(e.props.totalFrames)?" (frame "+(t.frame+1)+" / "+e.props.totalFrames+")":" (frame "+t.frame+")":r.length>1&&(u=" files");var c=a?"canvas-sketch-cli":"canvas-sketch",f=s?"Streaming into":"Exported";console.log("%c["+c+"]%c "+f+" %c"+i+"%c"+u,"color: #8e8e8e;","color: initial;","font-weight: bold;","font-weight: initial;")}return"function"===typeof e.sketch.postExport&&e.sketch.postExport(),n}))},W.prototype._wrapContextScale=function(t){this._preRender(),t(this.props),this._postRender()},W.prototype._preRender=function(){var t=this.props;this.props.gl||!t.context||t.p5?t.p5&&t.p5.scale(t.scaleX/t.pixelRatio,t.scaleY/t.pixelRatio):(t.context.save(),!1!==this.settings.scaleContext&&t.context.scale(t.scaleX,t.scaleY))},W.prototype._postRender=function(){var t=this.props;this.props.gl||!t.context||t.p5||t.context.restore(),t.gl&&!1!==this.settings.flush&&!t.p5&&t.gl.flush()},W.prototype.tick=function(){this.sketch&&"function"===typeof this.sketch.tick&&(this._preRender(),this.sketch.tick(this.props),this._postRender())},W.prototype.render=function(){return this.props.p5?(this._lastRedrawResult=void 0,this.props.p5.redraw(),this._lastRedrawResult):this.submitDrawCall()},W.prototype.submitDrawCall=function(){if(this.sketch){var t,e=this.props;return this._preRender(),"function"===typeof this.sketch?t=this.sketch(e):"function"===typeof this.sketch.render&&(t=this.sketch.render(e)),this._postRender(),t}},W.prototype.update=function(t){var e=this;void 0===t&&(t={});var n=["animate"];Object.keys(t).forEach((function(t){if(n.indexOf(t)>=0)throw new Error("Sorry, the { "+t+" } option is not yet supported with update().")}));var r=this._settings.canvas,i=this._settings.context;for(var o in t){var a=t[o];"undefined"!==typeof a&&(e._settings[o]=a)}var s=Object.assign({},this._settings,t);if("time"in t&&"frame"in t)throw new Error("You should specify { time } or { frame } but not both");if("time"in t?delete s.frame:"frame"in t&&delete s.time,"duration"in t&&"totalFrames"in t)throw new Error("You should specify { duration } or { totalFrames } but not both");"duration"in t?delete s.totalFrames:"totalFrames"in t&&delete s.duration,"data"in t&&(this._props.data=t.data);var u=this.getTimeProps(s);if(Object.assign(this._props,u),r!==this._settings.canvas||i!==this._settings.context){var c=q(this._settings),f=c.canvas,h=c.context;this.props.canvas=f,this.props.context=h,this._setupGLKey(),this._appendCanvasIfNeeded()}return t.p5&&"function"!==typeof t.p5&&(this.props.p5=t.p5,this.props.p5.draw=function(){e._isP5Resizing||(e._lastRedrawResult=e.submitDrawCall())}),"playing"in t&&(t.playing?this.play():this.pause()),j(this._settings),this.resize(),this.render(),this.props},W.prototype.resize=function(){var t=this._getSizeProps(),e=this.settings,n=this.props,r=I(n,e);Object.assign(this._props,r);var i=this.props,o=i.pixelRatio,a=i.canvasWidth,s=i.canvasHeight,u=i.styleWidth,c=i.styleHeight,f=this.props.canvas;f&&!1!==e.resizeCanvas&&(n.p5?f.width===a&&f.height===s||(this._isP5Resizing=!0,n.p5.pixelDensity(o),n.p5.resizeCanvas(a/o,s/o,!1),this._isP5Resizing=!1):(f.width!==a&&(f.width=a),f.height!==s&&(f.height=s)),d()&&!1!==e.styleCanvas&&(f.style.width=u+"px",f.style.height=c+"px"));var h=this._getSizeProps(),p=!g(t,h);return p&&this._sizeChanged(),p},W.prototype._sizeChanged=function(){this.sketch&&"function"===typeof this.sketch.resize&&this.sketch.resize(this.props)},W.prototype.animate=function(){if(this.props.playing)if(d()){this._raf=window.requestAnimationFrame(this._animateHandler);var t=u(),e=1e3/this.props.fps,n=t-this._lastTime,r=this.props.duration,i="number"===typeof r&&isFinite(r),o=!0,a=this.settings.playbackRate;"fixed"===a?n=e:"throttle"===a?n>e?(t-=n%e,this._lastTime=t):o=!1:this._lastTime=t;var s=n/1e3,c=this.props.time+s*this.props.timeScale;c<0&&i&&(c=r+c);var f=!1,h=!1,p=!1!==this.settings.loop;if(i&&c>=r&&(p?(o=!0,c%=r,h=!0):(o=!1,c=r,f=!0),this._signalEnd()),o){this.props.deltaTime=s,this.props.time=c,this.props.playhead=this._computePlayhead(c,r);var l=this.props.frame;this.props.frame=this._computeCurrentFrame(),h&&this._signalBegin(),l!==this.props.frame&&this.tick(),this.render(),this.props.deltaTime=0}f&&this.pause()}else console.error("[canvas-sketch] WARN: Animation in Node.js is not yet supported")},W.prototype.dispatch=function(t){if("function"!==typeof t)throw new Error("must pass function into dispatch()");t(this.props),this.render()},W.prototype.mount=function(){this._appendCanvasIfNeeded()},W.prototype.unmount=function(){d()&&(window.removeEventListener("resize",this._resizeHandler),this._keyboardShortcuts.detach()),this.props.canvas.parentElement&&this.props.canvas.parentElement.removeChild(this.props.canvas)},W.prototype._appendCanvasIfNeeded=function(){d()&&!1!==this.settings.parent&&this.props.canvas&&!this.props.canvas.parentElement&&(this.settings.parent||document.body).appendChild(this.props.canvas)},W.prototype._setupGLKey=function(){var t;this.props.context&&("function"===typeof(t=this.props.context).clear&&"function"===typeof t.clearColor&&"function"===typeof t.bufferData?this._props.gl=this.props.context:delete this._props.gl)},W.prototype.getTimeProps=function(t){void 0===t&&(t={});var e=t.duration,n=t.totalFrames,r=p(t.timeScale,1),i=p(t.fps,24),o="number"===typeof e&&isFinite(e),a="number"===typeof n&&isFinite(n),s=o?Math.floor(i*e):void 0,u=a?n/i:void 0;if(o&&a&&s!==n)throw new Error("You should specify either duration or totalFrames, but not both. Or, they must match exactly.");"undefined"===typeof t.dimensions&&"undefined"!==typeof t.units&&console.warn("You've specified a { units } setting but no { dimension }, so the units will be ignored."),n=p(n,s,1/0),e=p(e,u,1/0);var c=t.time,f=t.frame,h="number"===typeof c&&isFinite(c),d="number"===typeof f&&isFinite(f),l=0,m=0,y=0;if(h&&d)throw new Error("You should specify either start frame or time, but not both.");return h?(l=c,y=this._computePlayhead(l,e),m=this._computeFrame(y,l,n,i)):d&&(l=(m=f)/i,y=this._computePlayhead(l,e)),{playhead:y,time:l,frame:m,duration:e,totalFrames:n,fps:i,timeScale:r}},W.prototype.setup=function(t){var e=this;if(void 0===t&&(t={}),this.sketch)throw new Error("Multiple setup() calls not yet supported.");this._settings=Object.assign({},t,this._settings),j(this._settings);var n=q(this._settings),r=n.context,i=n.canvas,o=this.getTimeProps(this._settings);this._props=Object.assign({},o,{canvas:i,context:r,deltaTime:0,started:!1,exporting:!1,playing:!1,recording:!1,settings:this.settings,data:this.settings.data,render:function(){return e.render()},togglePlay:function(){return e.togglePlay()},dispatch:function(t){return e.dispatch(t)},tick:function(){return e.tick()},resize:function(){return e.resize()},update:function(t){return e.update(t)},exportFrame:function(t){return e.exportFrame(t)},record:function(){return e.record()},play:function(){return e.play()},pause:function(){return e.pause()},stop:function(){return e.stop()}}),this._setupGLKey(),this.resize()},W.prototype.loadAndRun=function(t,e){var n=this;return this.load(t,e).then((function(){return n.run(),n}))},W.prototype.unload=function(){var t=this;this.pause(),this.sketch&&("function"===typeof this.sketch.unload&&this._wrapContextScale((function(e){return t.sketch.unload(e)})),this._sketch=null)},W.prototype.destroy=function(){this.unload(),this.unmount()},W.prototype.load=function(t,e){var n=this;if("function"!==typeof t)throw new Error("The function must take in a function as the first parameter. Example:\n  canvasSketcher(() => { ... }, settings)");this.sketch&&this.unload(),"undefined"!==typeof e&&this.update(e),this._preRender();var r=Promise.resolve();if(this.settings.p5){if(!d())throw new Error("[canvas-sketch] ERROR: Using p5.js in Node.js is not supported");r=new Promise((function(t){var e,r=n.settings.p5;r.p5&&(e=r.preload,r=r.p5);var i=function(r){e&&(r.preload=function(){return e(r)}),r.setup=function(){var e=n.props,i="webgl"===n.settings.context,o=i?r.WEBGL:r.P2D;r.noLoop(),r.pixelDensity(e.pixelRatio),r.createCanvas(e.viewportWidth,e.viewportHeight,o),i&&n.settings.attributes&&r.setAttributes(n.settings.attributes),n.update({p5:r,canvas:r.canvas,context:r._renderer.drawingContext}),t()}};if("function"===typeof r)new r(i);else{if("function"!==typeof window.createCanvas)throw new Error("{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\nnew p5(); // <-- attaches to global scope");i(window)}}))}return r.then((function(){var e=t(n.props);return c(e)||(e=Promise.resolve(e)),e})).then((function(t){return t||(t={}),n._sketch=t,d()&&(n._keyboardShortcuts.attach(),window.addEventListener("resize",n._resizeHandler)),n._postRender(),n._sizeChanged(),n})).catch((function(t){throw console.warn("Could not start sketch, the async loading function rejected with an error:\n    Error: "+t.message),t}))},Object.defineProperties(W.prototype,U);var Y="hot-id-cache",B=[];function Z(t,e){if(void 0===e&&(e={}),e.p5){if(e.canvas||e.context&&"string"!==typeof e.context)throw new Error('In { p5 } mode, you can\'t pass your own canvas or context, unless the context is a "webgl" or "2d" string');var n="string"===typeof e.context&&e.context;e=Object.assign({},e,{canvas:!1,context:n})}var r,i=function(){var t=h();return t&&t.hot}();i&&(r=p(e.id,"$__DEFAULT_CANVAS_SKETCH_ID__$"));var o=i&&"string"===typeof r;o&&B.includes(r)&&(console.warn("Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. ",r),o=!1);var a=Promise.resolve();if(o){B.push(r);var s=function(t){var e=h();if(e)return e[Y]=e[Y]||{},e[Y][t]}(r);if(s){var u=function(){var t,n=(t=s.manager,e.animate?{time:t.props.time}:void 0);return s.manager.destroy(),n};a=s.load.then(u).catch(u)}}return a.then((function(n){var i,a=new W;return t?(e=Object.assign({},e,n),a.setup(e),a.mount(),i=a.loadAndRun(t)):i=Promise.resolve(a),o&&function(t,e){var n=h();n&&(n[Y]=n[Y]||{},n[Y][t]=e)}(r,{load:i,manager:a}),i}))}return Z.canvasSketch=Z,Z.PaperSizes=O,Z},t.exports=n()}).call(this,n(8))},8:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},9:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"create",(function(){return f})),n.d(r,"clone",(function(){return h})),n.d(r,"copy",(function(){return p})),n.d(r,"fromValues",(function(){return d})),n.d(r,"set",(function(){return l})),n.d(r,"identity",(function(){return m})),n.d(r,"transpose",(function(){return y})),n.d(r,"invert",(function(){return v})),n.d(r,"adjoint",(function(){return g})),n.d(r,"determinant",(function(){return b})),n.d(r,"multiply",(function(){return M})),n.d(r,"translate",(function(){return w})),n.d(r,"scale",(function(){return x})),n.d(r,"rotate",(function(){return _})),n.d(r,"rotateX",(function(){return k})),n.d(r,"rotateY",(function(){return T})),n.d(r,"rotateZ",(function(){return P})),n.d(r,"fromTranslation",(function(){return R})),n.d(r,"fromScaling",(function(){return E})),n.d(r,"fromRotation",(function(){return F})),n.d(r,"fromXRotation",(function(){return S})),n.d(r,"fromYRotation",(function(){return j})),n.d(r,"fromZRotation",(function(){return O})),n.d(r,"fromRotationTranslation",(function(){return C})),n.d(r,"fromQuat2",(function(){return D})),n.d(r,"getTranslation",(function(){return A})),n.d(r,"getScaling",(function(){return N})),n.d(r,"getRotation",(function(){return H})),n.d(r,"fromRotationTranslationScale",(function(){return z})),n.d(r,"fromRotationTranslationScaleOrigin",(function(){return I})),n.d(r,"fromQuat",(function(){return L})),n.d(r,"frustum",(function(){return q})),n.d(r,"perspectiveNO",(function(){return W})),n.d(r,"perspective",(function(){return U})),n.d(r,"perspectiveZO",(function(){return Y})),n.d(r,"perspectiveFromFieldOfView",(function(){return B})),n.d(r,"orthoNO",(function(){return Z})),n.d(r,"ortho",(function(){return K})),n.d(r,"orthoZO",(function(){return Q})),n.d(r,"lookAt",(function(){return G})),n.d(r,"targetTo",(function(){return V})),n.d(r,"str",(function(){return X})),n.d(r,"frob",(function(){return J})),n.d(r,"add",(function(){return $})),n.d(r,"subtract",(function(){return tt})),n.d(r,"multiplyScalar",(function(){return et})),n.d(r,"multiplyScalarAndAdd",(function(){return nt})),n.d(r,"exactEquals",(function(){return rt})),n.d(r,"equals",(function(){return it})),n.d(r,"mul",(function(){return ot})),n.d(r,"sub",(function(){return at}));var i={};n.r(i),n.d(i,"create",(function(){return st})),n.d(i,"clone",(function(){return ut})),n.d(i,"length",(function(){return ct})),n.d(i,"fromValues",(function(){return ft})),n.d(i,"copy",(function(){return ht})),n.d(i,"set",(function(){return pt})),n.d(i,"add",(function(){return dt})),n.d(i,"subtract",(function(){return lt})),n.d(i,"multiply",(function(){return mt})),n.d(i,"divide",(function(){return yt})),n.d(i,"ceil",(function(){return vt})),n.d(i,"floor",(function(){return gt})),n.d(i,"min",(function(){return bt})),n.d(i,"max",(function(){return Mt})),n.d(i,"round",(function(){return wt})),n.d(i,"scale",(function(){return xt})),n.d(i,"scaleAndAdd",(function(){return _t})),n.d(i,"distance",(function(){return kt})),n.d(i,"squaredDistance",(function(){return Tt})),n.d(i,"squaredLength",(function(){return Pt})),n.d(i,"negate",(function(){return Rt})),n.d(i,"inverse",(function(){return Et})),n.d(i,"normalize",(function(){return Ft})),n.d(i,"dot",(function(){return St})),n.d(i,"cross",(function(){return jt})),n.d(i,"lerp",(function(){return Ot})),n.d(i,"hermite",(function(){return Ct})),n.d(i,"bezier",(function(){return Dt})),n.d(i,"random",(function(){return At})),n.d(i,"transformMat4",(function(){return Nt})),n.d(i,"transformMat3",(function(){return Ht})),n.d(i,"transformQuat",(function(){return zt})),n.d(i,"rotateX",(function(){return It})),n.d(i,"rotateY",(function(){return Lt})),n.d(i,"rotateZ",(function(){return qt})),n.d(i,"angle",(function(){return Wt})),n.d(i,"zero",(function(){return Ut})),n.d(i,"str",(function(){return Yt})),n.d(i,"exactEquals",(function(){return Bt})),n.d(i,"equals",(function(){return Zt})),n.d(i,"sub",(function(){return Kt})),n.d(i,"mul",(function(){return Qt})),n.d(i,"div",(function(){return Gt})),n.d(i,"dist",(function(){return Vt})),n.d(i,"sqrDist",(function(){return Xt})),n.d(i,"len",(function(){return Jt})),n.d(i,"sqrLen",(function(){return $t})),n.d(i,"forEach",(function(){return te}));var o=n(0),a=n.n(o),s=1e-6,u="undefined"!==typeof Float32Array?Float32Array:Array,c=Math.random;Math.PI;function f(){var t=new u(16);return u!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function h(t){var e=new u(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function d(t,e,n,r,i,o,a,s,c,f,h,p,d,l,m,y){var v=new u(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=i,v[5]=o,v[6]=a,v[7]=s,v[8]=c,v[9]=f,v[10]=h,v[11]=p,v[12]=d,v[13]=l,v[14]=m,v[15]=y,v}function l(t,e,n,r,i,o,a,s,u,c,f,h,p,d,l,m,y){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=f,t[10]=h,t[11]=p,t[12]=d,t[13]=l,t[14]=m,t[15]=y,t}function m(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function y(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function v(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],h=e[9],p=e[10],d=e[11],l=e[12],m=e[13],y=e[14],v=e[15],g=n*s-r*a,b=n*u-i*a,M=n*c-o*a,w=r*u-i*s,x=r*c-o*s,_=i*c-o*u,k=f*m-h*l,T=f*y-p*l,P=f*v-d*l,R=h*y-p*m,E=h*v-d*m,F=p*v-d*y,S=g*F-b*E+M*R+w*P-x*T+_*k;return S?(S=1/S,t[0]=(s*F-u*E+c*R)*S,t[1]=(i*E-r*F-o*R)*S,t[2]=(m*_-y*x+v*w)*S,t[3]=(p*x-h*_-d*w)*S,t[4]=(u*P-a*F-c*T)*S,t[5]=(n*F-i*P+o*T)*S,t[6]=(y*M-l*_-v*b)*S,t[7]=(f*_-p*M+d*b)*S,t[8]=(a*E-s*P+c*k)*S,t[9]=(r*P-n*E-o*k)*S,t[10]=(l*x-m*M+v*g)*S,t[11]=(h*M-f*x-d*g)*S,t[12]=(s*T-a*R-u*k)*S,t[13]=(n*R-r*T+i*k)*S,t[14]=(m*b-l*w-y*g)*S,t[15]=(f*w-h*b+p*g)*S,t):null}function g(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],h=e[9],p=e[10],d=e[11],l=e[12],m=e[13],y=e[14],v=e[15];return t[0]=s*(p*v-d*y)-h*(u*v-c*y)+m*(u*d-c*p),t[1]=-(r*(p*v-d*y)-h*(i*v-o*y)+m*(i*d-o*p)),t[2]=r*(u*v-c*y)-s*(i*v-o*y)+m*(i*c-o*u),t[3]=-(r*(u*d-c*p)-s*(i*d-o*p)+h*(i*c-o*u)),t[4]=-(a*(p*v-d*y)-f*(u*v-c*y)+l*(u*d-c*p)),t[5]=n*(p*v-d*y)-f*(i*v-o*y)+l*(i*d-o*p),t[6]=-(n*(u*v-c*y)-a*(i*v-o*y)+l*(i*c-o*u)),t[7]=n*(u*d-c*p)-a*(i*d-o*p)+f*(i*c-o*u),t[8]=a*(h*v-d*m)-f*(s*v-c*m)+l*(s*d-c*h),t[9]=-(n*(h*v-d*m)-f*(r*v-o*m)+l*(r*d-o*h)),t[10]=n*(s*v-c*m)-a*(r*v-o*m)+l*(r*c-o*s),t[11]=-(n*(s*d-c*h)-a*(r*d-o*h)+f*(r*c-o*s)),t[12]=-(a*(h*y-p*m)-f*(s*y-u*m)+l*(s*p-u*h)),t[13]=n*(h*y-p*m)-f*(r*y-i*m)+l*(r*p-i*h),t[14]=-(n*(s*y-u*m)-a*(r*y-i*m)+l*(r*u-i*s)),t[15]=n*(s*p-u*h)-a*(r*p-i*h)+f*(r*u-i*s),t}function b(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],l=t[13],m=t[14],y=t[15];return(e*a-n*o)*(h*y-p*m)-(e*s-r*o)*(f*y-p*l)+(e*u-i*o)*(f*m-h*l)+(n*s-r*a)*(c*y-p*d)-(n*u-i*a)*(c*m-h*d)+(r*u-i*s)*(c*l-f*d)}function M(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=e[8],p=e[9],d=e[10],l=e[11],m=e[12],y=e[13],v=e[14],g=e[15],b=n[0],M=n[1],w=n[2],x=n[3];return t[0]=b*r+M*s+w*h+x*m,t[1]=b*i+M*u+w*p+x*y,t[2]=b*o+M*c+w*d+x*v,t[3]=b*a+M*f+w*l+x*g,b=n[4],M=n[5],w=n[6],x=n[7],t[4]=b*r+M*s+w*h+x*m,t[5]=b*i+M*u+w*p+x*y,t[6]=b*o+M*c+w*d+x*v,t[7]=b*a+M*f+w*l+x*g,b=n[8],M=n[9],w=n[10],x=n[11],t[8]=b*r+M*s+w*h+x*m,t[9]=b*i+M*u+w*p+x*y,t[10]=b*o+M*c+w*d+x*v,t[11]=b*a+M*f+w*l+x*g,b=n[12],M=n[13],w=n[14],x=n[15],t[12]=b*r+M*s+w*h+x*m,t[13]=b*i+M*u+w*p+x*y,t[14]=b*o+M*c+w*d+x*v,t[15]=b*a+M*f+w*l+x*g,t}function w(t,e,n){var r,i,o,a,s,u,c,f,h,p,d,l,m=n[0],y=n[1],v=n[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*v+e[12],t[13]=e[1]*m+e[5]*y+e[9]*v+e[13],t[14]=e[2]*m+e[6]*y+e[10]*v+e[14],t[15]=e[3]*m+e[7]*y+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=e[8],p=e[9],d=e[10],l=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=f,t[8]=h,t[9]=p,t[10]=d,t[11]=l,t[12]=r*m+s*y+h*v+e[12],t[13]=i*m+u*y+p*v+e[13],t[14]=o*m+c*y+d*v+e[14],t[15]=a*m+f*y+l*v+e[15]),t}function x(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function _(t,e,n,r){var i,o,a,u,c,f,h,p,d,l,m,y,v,g,b,M,w,x,_,k,T,P,R,E,F=r[0],S=r[1],j=r[2],O=Math.hypot(F,S,j);return O<s?null:(F*=O=1/O,S*=O,j*=O,i=Math.sin(n),a=1-(o=Math.cos(n)),u=e[0],c=e[1],f=e[2],h=e[3],p=e[4],d=e[5],l=e[6],m=e[7],y=e[8],v=e[9],g=e[10],b=e[11],M=F*F*a+o,w=S*F*a+j*i,x=j*F*a-S*i,_=F*S*a-j*i,k=S*S*a+o,T=j*S*a+F*i,P=F*j*a+S*i,R=S*j*a-F*i,E=j*j*a+o,t[0]=u*M+p*w+y*x,t[1]=c*M+d*w+v*x,t[2]=f*M+l*w+g*x,t[3]=h*M+m*w+b*x,t[4]=u*_+p*k+y*T,t[5]=c*_+d*k+v*T,t[6]=f*_+l*k+g*T,t[7]=h*_+m*k+b*T,t[8]=u*P+p*R+y*E,t[9]=c*P+d*R+v*E,t[10]=f*P+l*R+g*E,t[11]=h*P+m*R+b*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function k(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],f=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+f*r,t[6]=s*i+h*r,t[7]=u*i+p*r,t[8]=c*i-o*r,t[9]=f*i-a*r,t[10]=h*i-s*r,t[11]=p*i-u*r,t}function T(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],f=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-f*r,t[2]=s*i-h*r,t[3]=u*i-p*r,t[8]=o*r+c*i,t[9]=a*r+f*i,t[10]=s*r+h*i,t[11]=u*r+p*i,t}function P(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],f=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+f*r,t[2]=s*i+h*r,t[3]=u*i+p*r,t[4]=c*i-o*r,t[5]=f*i-a*r,t[6]=h*i-s*r,t[7]=p*i-u*r,t}function R(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function E(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function F(t,e,n){var r,i,o,a=n[0],u=n[1],c=n[2],f=Math.hypot(a,u,c);return f<s?null:(a*=f=1/f,u*=f,c*=f,r=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=a*a*o+i,t[1]=u*a*o+c*r,t[2]=c*a*o-u*r,t[3]=0,t[4]=a*u*o-c*r,t[5]=u*u*o+i,t[6]=c*u*o+a*r,t[7]=0,t[8]=a*c*o+u*r,t[9]=u*c*o-a*r,t[10]=c*c*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function S(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function j(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function C(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,f=r*s,h=r*u,p=r*c,d=i*u,l=i*c,m=o*c,y=a*s,v=a*u,g=a*c;return t[0]=1-(d+m),t[1]=h+g,t[2]=p-v,t[3]=0,t[4]=h-g,t[5]=1-(f+m),t[6]=l+y,t[7]=0,t[8]=p+v,t[9]=l-y,t[10]=1-(f+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function D(t,e){var n=new u(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],c=e[5],f=e[6],h=e[7],p=r*r+i*i+o*o+a*a;return p>0?(n[0]=2*(s*a+h*r+c*o-f*i)/p,n[1]=2*(c*a+h*i+f*r-s*o)/p,n[2]=2*(f*a+h*o+s*i-c*r)/p):(n[0]=2*(s*a+h*r+c*o-f*i),n[1]=2*(c*a+h*i+f*r-s*o),n[2]=2*(f*a+h*o+s*i-c*r)),C(t,e,n),t}function A(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function N(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,c,f),t}function H(t,e){var n=new u(3);N(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,s=e[1]*i,c=e[2]*o,f=e[4]*r,h=e[5]*i,p=e[6]*o,d=e[8]*r,l=e[9]*i,m=e[10]*o,y=a+h+m,v=0;return y>0?(v=2*Math.sqrt(y+1),t[3]=.25*v,t[0]=(p-l)/v,t[1]=(d-c)/v,t[2]=(s-f)/v):a>h&&a>m?(v=2*Math.sqrt(1+a-h-m),t[3]=(p-l)/v,t[0]=.25*v,t[1]=(s+f)/v,t[2]=(d+c)/v):h>m?(v=2*Math.sqrt(1+h-a-m),t[3]=(d-c)/v,t[0]=(s+f)/v,t[1]=.25*v,t[2]=(p+l)/v):(v=2*Math.sqrt(1+m-a-h),t[3]=(s-f)/v,t[0]=(d+c)/v,t[1]=(p+l)/v,t[2]=.25*v),t}function z(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,f=a+a,h=i*u,p=i*c,d=i*f,l=o*c,m=o*f,y=a*f,v=s*u,g=s*c,b=s*f,M=r[0],w=r[1],x=r[2];return t[0]=(1-(l+y))*M,t[1]=(p+b)*M,t[2]=(d-g)*M,t[3]=0,t[4]=(p-b)*w,t[5]=(1-(h+y))*w,t[6]=(m+v)*w,t[7]=0,t[8]=(d+g)*x,t[9]=(m-v)*x,t[10]=(1-(h+l))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function I(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,f=a+a,h=s+s,p=o*c,d=o*f,l=o*h,m=a*f,y=a*h,v=s*h,g=u*c,b=u*f,M=u*h,w=r[0],x=r[1],_=r[2],k=i[0],T=i[1],P=i[2],R=(1-(m+v))*w,E=(d+M)*w,F=(l-b)*w,S=(d-M)*x,j=(1-(p+v))*x,O=(y+g)*x,C=(l+b)*_,D=(y-g)*_,A=(1-(p+m))*_;return t[0]=R,t[1]=E,t[2]=F,t[3]=0,t[4]=S,t[5]=j,t[6]=O,t[7]=0,t[8]=C,t[9]=D,t[10]=A,t[11]=0,t[12]=n[0]+k-(R*k+S*T+C*P),t[13]=n[1]+T-(E*k+j*T+D*P),t[14]=n[2]+P-(F*k+O*T+A*P),t[15]=1,t}function L(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,h=r*s,p=i*a,d=i*s,l=i*u,m=o*a,y=o*s,v=o*u;return t[0]=1-h-l,t[1]=f+v,t[2]=p-y,t[3]=0,t[4]=f-v,t[5]=1-c-l,t[6]=d+m,t[7]=0,t[8]=p+y,t[9]=d-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function q(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function W(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var U=W;function Y(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=i*o,t[14]=i*r*o):(t[10]=-1,t[14]=-r),t}function B(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Z(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}var K=Z;function Q(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=o*c,t[15]=1,t}function G(t,e,n,r){var i,o,a,u,c,f,h,p,d,l,y=e[0],v=e[1],g=e[2],b=r[0],M=r[1],w=r[2],x=n[0],_=n[1],k=n[2];return Math.abs(y-x)<s&&Math.abs(v-_)<s&&Math.abs(g-k)<s?m(t):(h=y-x,p=v-_,d=g-k,i=M*(d*=l=1/Math.hypot(h,p,d))-w*(p*=l),o=w*(h*=l)-b*d,a=b*p-M*h,(l=Math.hypot(i,o,a))?(i*=l=1/l,o*=l,a*=l):(i=0,o=0,a=0),u=p*a-d*o,c=d*i-h*a,f=h*o-p*i,(l=Math.hypot(u,c,f))?(u*=l=1/l,c*=l,f*=l):(u=0,c=0,f=0),t[0]=i,t[1]=u,t[2]=h,t[3]=0,t[4]=o,t[5]=c,t[6]=p,t[7]=0,t[8]=a,t[9]=f,t[10]=d,t[11]=0,t[12]=-(i*y+o*v+a*g),t[13]=-(u*y+c*v+f*g),t[14]=-(h*y+p*v+d*g),t[15]=1,t)}function V(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],c=r[2],f=i-n[0],h=o-n[1],p=a-n[2],d=f*f+h*h+p*p;d>0&&(f*=d=1/Math.sqrt(d),h*=d,p*=d);var l=u*p-c*h,m=c*f-s*p,y=s*h-u*f;return(d=l*l+m*m+y*y)>0&&(l*=d=1/Math.sqrt(d),m*=d,y*=d),t[0]=l,t[1]=m,t[2]=y,t[3]=0,t[4]=h*y-p*m,t[5]=p*l-f*y,t[6]=f*m-h*l,t[7]=0,t[8]=f,t[9]=h,t[10]=p,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function X(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function J(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function $(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function tt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function et(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function nt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function rt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function it(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],c=t[6],f=t[7],h=t[8],p=t[9],d=t[10],l=t[11],m=t[12],y=t[13],v=t[14],g=t[15],b=e[0],M=e[1],w=e[2],x=e[3],_=e[4],k=e[5],T=e[6],P=e[7],R=e[8],E=e[9],F=e[10],S=e[11],j=e[12],O=e[13],C=e[14],D=e[15];return Math.abs(n-b)<=s*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-M)<=s*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(i-w)<=s*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(o-x)<=s*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-_)<=s*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(u-k)<=s*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(c-T)<=s*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(f-P)<=s*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(h-R)<=s*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(p-E)<=s*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(d-F)<=s*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(l-S)<=s*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(m-j)<=s*Math.max(1,Math.abs(m),Math.abs(j))&&Math.abs(y-O)<=s*Math.max(1,Math.abs(y),Math.abs(O))&&Math.abs(v-C)<=s*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(g-D)<=s*Math.max(1,Math.abs(g),Math.abs(D))}var ot=M,at=tt;function st(){var t=new u(3);return u!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function ut(t){var e=new u(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ct(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function ft(t,e,n){var r=new u(3);return r[0]=t,r[1]=e,r[2]=n,r}function ht(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function pt(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function dt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function lt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function mt(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function yt(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function vt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function gt(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function bt(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function Mt(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function wt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function xt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function _t(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function kt(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function Tt(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function Pt(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function Rt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Et(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Ft(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function St(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function jt(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function Ot(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function Ct(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),f=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*f,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*f,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*f,t}function Dt(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,f=3*o*s,h=3*u*a,p=u*o;return t[0]=e[0]*c+n[0]*f+r[0]*h+i[0]*p,t[1]=e[1]*c+n[1]*f+r[1]*h+i[1]*p,t[2]=e[2]*c+n[2]*f+r[2]*h+i[2]*p,t}function At(t,e){e=e||1;var n=2*c()*Math.PI,r=2*c()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function Nt(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function Ht(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function zt(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],f=i*c-o*u,h=o*s-r*c,p=r*u-i*s,d=i*p-o*h,l=o*f-r*p,m=r*h-i*f,y=2*a;return f*=y,h*=y,p*=y,d*=2,l*=2,m*=2,t[0]=s+f+d,t[1]=u+h+l,t[2]=c+p+m,t}function It(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function Lt(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function qt(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function Wt(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+a*a+s*s),c=u&&St(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function Ut(t){return t[0]=0,t[1]=0,t[2]=0,t}function Yt(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Bt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Zt(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],u=e[2];return Math.abs(n-o)<=s*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=s*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-u)<=s*Math.max(1,Math.abs(i),Math.abs(u))}var Kt=lt,Qt=mt,Gt=yt,Vt=kt,Xt=Tt,Jt=ct,$t=Pt,te=function(){var t=st();return function(e,n,r,i,o,a){var s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),ee={canvas:document.querySelector("#canvas"),dimensions:[1024,1024],animate:!0};a()((function(t){var e=t.context,n=t.width,o=t.height,a=[[-1,-1,1],[-1,-1,-1],[1,-1,-1],[1,-1,1],[1,1,1],[1,1,-1],[-1,1,-1],[-1,1,1]],s=[[0,7],[0,3],[0,1],[6,7],[6,5],[6,1],[2,5],[2,1],[2,3],[4,3],[4,5],[4,7]],u=r.create(),c=document.createElement("canvas");c.width=n,c.height=o;var f=c.getContext("2d"),h=0;[e,f].forEach((function(t){t.fillStyle="hsla(0, 0%, 98%)",t.fillRect(0,0,n,o)}));var p=[],d=!0;return function(t){var e=t.context,l=t.time;e.drawImage(c,0,0),e.lineWidth=1,e.strokeStyle="hsl(0, 0%, 98%)";for(var m=new Path2D,y=function(t){var o=r.clone(u);r.rotateX(o,o,Math.cos(l)+l/10),r.rotateY(o,o,Math.sin(l)),r.rotateZ(o,o,Math.sin(l+Math.PI/4));var c=(Math.cos(l)/4+1.5)/Math.sqrt(t/2);r.scale(o,o,[c,c,c]),e.fillStyle="hsl(".concat(l,", 80%, 50%)");var f=a.map((function(t){var e=[];return i.transformMat4(e,t,o),e}));s.forEach((function(t,e){t.map((function(t){return[100*f[t][0]+n/2,100*f[t][1]+n/2]})).forEach((function(t,n){0===e&&0===n?m.moveTo(t[0],t[1]):m.lineTo(t[0],t[1])}))}))},v=0;v<20;v+=1)y(v);if(e.stroke(m),l-h>.04){if(p.push(m),d=!d,!(p.length>2))return;p=p.slice(1),h=l,f.fillStyle="hsla(0, 0%, 10%)",f.fillRect(0,0,n,o),d?(f.lineWidth=1,f.strokeStyle="#F00",f.stroke(p[1])):(f.lineWidth=1,f.strokeStyle="#0FF",f.stroke(p[0]))}}}),ee)}});